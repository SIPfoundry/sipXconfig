<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--   Generated by sipXecs: http://www.sipfoundry.org/

   Instructions for integrating new configuration file content into sipXconfig:
     http://wiki.sipfoundry.org/display/xecsdev/Adding+Polycom+SoundPoint+IP+New+Configuration+File+Content+into+sipXconfig
-->
<polycomConfig xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="polycomConfig.xsd">
  <se se.destination="chassis">
    <se.rt>
      <se.rt.modification se.rt.modification.enabled="1" />
    </se.rt>
  </se>
  <reg
#foreach ($line in ${lines})
#set ($i = $velocityCount)
#set ($reg = $line.getSetting('reg'))
#foreach ($setting in $cfg.getRecursiveSettings($reg))
    reg.${i}.${setting.ProfileName}="$!{setting.Value}"
#end
    reg.${i}.acd-login-logout="0"
    reg.${i}.acd-agent-available="0"
    reg.${i}.proxyRequire=""
#end
  />
  
  <call>
#set ($dndPerReg = $cfg.EndpointSettings.getSetting('call/donotdisturb.perReg'))
    <call.donotdisturb call.donotdisturb.perReg="$!{dndPerReg.Value}" />
    <call.autoOffHook
#foreach ($line in $lines)
#set ($i = $velocityCount)
#set ($group = $line.getSetting('call').getSetting('autoOffHook'))
#foreach ($setting in $cfg.getSettings($group))
      call.autoOffHook.${i}.${setting.ProfileName}="$!{setting.Value}"
#end
#end
    />
    <call.missedCallTracking
#foreach ($line in $lines)
#set ($i = $velocityCount)
#set ($group = $line.getSetting('call').getSetting('missedCallTracking'))
#foreach ($setting in $cfg.getSettings($group))
      call.missedCallTracking.${i}.${setting.ProfileName}="$!{setting.Value}"
#end
#end
    />
    <call.serverMissedCall
#foreach ($line in $lines)
#set ($i = $velocityCount)
#set ($group = $line.getSetting('call').getSetting('serverMissedCall'))
#foreach ($setting in $cfg.getSettings($group))
      call.serverMissedCall.${i}.${setting.ProfileName}="$!{setting.Value}"
#end
#end
    />
#set ($callWaitingRing = $cfg.EndpointSettings.getSetting('call/callWaiting.ring'))
    <call.callWaiting
      call.callWaiting.ring="$!{callWaitingRing.value}"
    />
  </call>
#set ($up = $cfg.EndpointSettings.getSetting('up').getSetting('general'))
  <up
#foreach ($setting in $cfg.getSettings($up))
      up.${setting.ProfileName}="$!{setting.Value}"
#end
	#if($phone.getDeviceVersion() == $ver5 && ($phone.model.modelId == "polycomVVX500" || $phone.model.modelId == "polycomVVX600"))
	#set ($nodc = $cfg.EndpointSettings.getSetting('up/numOfDisplayColumns/numOfDisplayColumns'))
     up.numOfDisplayColumns="$!{nodc.Value}"
    #end
  >
 #if ($phone.model.isSupported("video"))
  #set ($pictureFrame = $cfg.EndpointSettings.getSetting('up').getSetting('pictureFrame'))
  #if($pictureFrame)
    <up.pictureFrame
  #foreach ($setting in $cfg.getSettings($pictureFrame))
      up.pictureFrame.${setting.ProfileName}="$!{setting.Value}"
  #end
    />
  #end
  #set ($screenSaver = $cfg.EndpointSettings.getSetting('up').getSetting('screenSaver'))
  #if($screenSaver)
    <up.screenSaver
  #foreach ($setting in $cfg.getSettings($screenSaver))
      up.screenSaver.${setting.ProfileName}="$!{setting.Value}"
  #end
    />
  #end
 #end
  </up>
</polycomConfig>
