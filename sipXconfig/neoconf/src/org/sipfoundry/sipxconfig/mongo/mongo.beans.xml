<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

  <bean id="mongoDbFactory" class="org.sipfoundry.commons.mongo.MongoSpringFactory">
    <property name="configFile" value="${sysdir.etc}/mongo_client.ini" />
  </bean>
  
  <bean id="mongoTunnnel" class="org.sipfoundry.sipxconfig.mongo.MongoTunnelProvider" />

  <bean id="mongoConfig" class="org.sipfoundry.sipxconfig.cfengine.CfDataFile">
    <property name="name" value="mongo.cfdat" />
  </bean>
  <bean id="mongoBundle" parent="abstractBundle">
    <constructor-arg value="mongo" />
    <property name="autoEnable" value="true" />
    <!-- primary only for now -->
    <property name="onlyPrimary" value="true" />
  </bean>
  <bean id="mongoService" class="org.sipfoundry.sipxconfig.mongo.MongoService" parent="sipxService"
    scope="prototype">
    <property name="processName" value="mongo" />
    <property name="modelName" value="mongod.xml" />
    <property name="modelDir" value="mongo" />
    <property name="configurations">
      <list>
        <ref bean="mongoConfig" />
      </list>
    </property>
    <property name="bundles">
      <set>
        <ref bean="mongoBundle" />
      </set>
    </property>
  </bean>
</beans>
