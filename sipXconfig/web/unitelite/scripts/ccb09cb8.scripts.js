!function(){"use strict";angular.module("config",[]).constant("CONFIG",{debug:!0,chatstateGoneTimeout:6e5,keyPhotos:"uw:roster:photos",prefix:"ouc",authCookie:"oucunitewebauth",version:"0.7.8",baseRest:"/sipxconfig/rest"})}(),function(){"use strict";angular.module("emoji",[]).constant("EMOJI",[{name:"Happy",equivalents:[":-)",":)"],src:"media/emoticons/Default/happy.png"},{name:"Angry",equivalents:[">:o",">:-o","x("],src:"media/emoticons/Default/angry.png"},{name:"Blushing",equivalents:[":-[",':">'],src:"media/emoticons/Default/blush.png"},{name:"Confused",equivalents:["?:|",":-/"],src:"media/emoticons/Default/confused.png"},{name:"Cool",equivalents:["B-)"],src:"media/emoticons/Default/cool.png"},{name:"Crying",equivalents:[':"(',":(("],src:"media/emoticons/Default/cry.png"},{name:"Devil",equivalents:["]:)",">:)"],src:"media/emoticons/Default/devil.png"},{name:"Big Grin",equivalents:[":-D",":D"],src:"media/emoticons/Default/grin.png"},{name:"Laughing",equivalents:[":^0",":))"],src:"media/emoticons/Default/laugh.png"},{name:"Love Struck",equivalents:[":x"],src:"media/emoticons/Default/love.png"},{name:"Mischief",equivalents:[";\\",":>"],src:"media/emoticons/Default/mischief.png"},{name:"Sad",equivalents:[":-(",":("],src:"media/emoticons/Default/sad.png"},{name:"Straight Face",equivalents:[":|",":-|"],src:"media/emoticons/Default/plain.png"},{name:"Shocked",equivalents:[":0",":-O",":O"],src:"media/emoticons/Default/shocked.png"},{name:"Silly",equivalents:[":-p",":p",":-P",":p"],src:"media/emoticons/Default/silly.png"},{name:"Wink",equivalents:[";-)",";)"],src:"media/emoticons/Default/wink.png"},{name:"Alert",equivalents:["(!)"],src:"media/emoticons/Default/alert.png"},{name:"Info",equivalents:["(i)"],src:"media/emoticons/Default/info.png"},{name:"Minus",equivalents:["(-)"],src:"media/emoticons/Default/minus.png"},{name:"Plus",equivalents:["(+)"],src:"media/emoticons/Default/plus.png"},{name:"Heart",equivalents:["(heart)"],src:"media/emoticons/Default/heart.png"},{name:"Sleepy",equivalents:["(:|"],src:"media/emoticons/Default/sleepy.gif"},{name:'Let"s Party',equivalents:["<:-P"],src:"media/emoticons/Default/party.gif"},{name:"Rolling Eyes",equivalents:["8-|"],src:"media/emoticons/Default/eyeroll.gif"}])}(),function(){"use strict";var notify=angular.module("notify",[]);notify.factory("notify",function(){return window.Notify})}(),function(){"use strict";var underscore=angular.module("underscore",[]);underscore.factory("_",function(){return window._})}(),function(){"use strict";var Base64=function(){var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",obj={encode:function(input){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,output="",i=0;do chr1=input.charCodeAt(i++),chr2=input.charCodeAt(i++),chr3=input.charCodeAt(i++),enc1=chr1>>2,enc2=(3&chr1)<<4|chr2>>4,enc3=(15&chr2)<<2|chr3>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+keyStr.charAt(enc1)+keyStr.charAt(enc2)+keyStr.charAt(enc3)+keyStr.charAt(enc4);while(i<input.length);return output},decode:function(input){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,output="",i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");do enc1=keyStr.indexOf(input.charAt(i++)),enc2=keyStr.indexOf(input.charAt(i++)),enc3=keyStr.indexOf(input.charAt(i++)),enc4=keyStr.indexOf(input.charAt(i++)),chr1=enc1<<2|enc2>>4,chr2=(15&enc2)<<4|enc3>>2,chr3=(3&enc3)<<6|enc4,output+=String.fromCharCode(chr1),64!=enc3&&(output+=String.fromCharCode(chr2)),64!=enc4&&(output+=String.fromCharCode(chr3));while(i<input.length);return output}};return obj}();window.Base64=Base64}(),function(window){"use strict";var uniteWeb=angular.module("uw",["ngAnimate","ngSanitize","ngCookies","ngRoute","config","emoji","underscore","LocalStorageModule","notify","xml","dragAndDrop"]);uniteWeb.config(["$routeProvider","$httpProvider","$compileProvider","$provide",function($routeProvider,$httpProvider,$compileProvider,$provide){$routeProvider.when("/",{templateUrl:"views/main.html",controller:["$scope","$location","restService","uiService",function($scope,$location,restService,uiService){$scope.received=!0,restService.getLogindetails().then(function(data){restService.updateCredentials(data["login-details"].userName),restService.connected=!0},function(err){console.log(err)}).then(function(){return restService.getPhonebook()}).then(function(data){restService.phonebook=data.phonebook,restService.phonebook.forEach(function(el,i){restService.phonebook[i].name=restService.phonebook[i]["contact-information"].imDisplayName||restService.phonebook[i]["first-name"]+" "+restService.phonebook[i]["last-name"]}),uiService.util.populateContactList()}).catch(function(err){console.log(err)})}]}),$compileProvider.aHrefSanitizationWhitelist(/^\s*(http|https|blob|mailto):/),$compileProvider.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|file|blob):|data:image\//),$provide.decorator("ngModelDirective",function($delegate){var ngModel=$delegate[0],controller=ngModel.controller;return ngModel.controller=["$scope","$element","$attrs","$injector",function(scope,element,attrs,$injector){var $interpolate=$injector.get("$interpolate");attrs.$set("name",$interpolate(attrs.name||"")(scope)),$injector.invoke(controller,this,{$scope:scope,$element:element,$attrs:attrs})}],$delegate}),$provide.decorator("formDirective",function($delegate){var form=$delegate[0],controller=form.controller;return form.controller=["$scope","$element","$attrs","$injector",function(scope,element,attrs,$injector){var $interpolate=$injector.get("$interpolate");attrs.$set("name",$interpolate(attrs.name||attrs.ngForm||"")(scope)),$injector.invoke(controller,this,{$scope:scope,$element:element,$attrs:attrs})}],$delegate})}]),uniteWeb.run(["$templateCache",function($templateCache){$templateCache.put("tooltip.tpl.html",'<div class="tooltip in" ng-show="title"><div class="tooltip-arrow"></div><div class="tooltip-inner" ng-bind="title"></div></div>')}]),window.uw=uniteWeb,"function"==typeof define&&define.amd&&define(uw)}(window,document),function(){"use strict";uw.factory("profileFactory",["strophe",function(){function makeHumanReadable(text){var translated=text,dict=[{vcard:"ADR",human:"Address"},{vcard:"CTRY",human:"Country"},{vcard:"EXTADD",human:"Extended-Address"},{vcard:"HOME",human:"Home"},{vcard:"LOCALITY",human:"Locality"},{vcard:"PCODE",human:"Postal-Code"},{vcard:"REGION",human:"Region"},{vcard:"STREET",human:"Street"},{vcard:"BDAY",human:"Birth-Day"},{vcard:"DESC",human:"Description"},{vcard:"EMAIL",human:"Email"},{vcard:"INTERNET",human:"Internet"},{vcard:"PREF",human:"Pref"},{vcard:"USERID",human:"User"},{vcard:"FN",human:"Full-Name"},{vcard:"JABBERID",human:"JabberID"},{vcard:"N",human:"Names"},{vcard:"FAMILY",human:"Family"},{vcard:"GIVEN",human:"Given"},{vcard:"MIDDLE",human:"Middle"},{vcard:"NICKNAME",human:"Nickname"},{vcard:"ORG",human:"Organization"},{vcard:"ORGUNIT",human:"Organizational Unit"},{vcard:"PHOTO",human:"Photo"},{vcard:"BINVAL",human:"Binary-Value"},{vcard:"TYPE",human:"Type"},{vcard:"ROLE",human:"Role"},{vcard:"TEL",human:"Telephone"},{vcard:"HOME",human:"Home-Phone"},{vcard:"MSG",human:"Messaging"},{vcard:"NUMBER",human:"Number"},{vcard:"TITLE",human:"Title"},{vcard:"URL",human:"Url"},{vcard:"X-ALT-EMAIL",human:"Alternative-Email"},{vcard:"X-ALT-JABBERID",human:"Alternative-JabberID"},{vcard:"X-ASSISTANT",human:"Assistant"},{vcard:"X-ASSISTANT-PHONE",human:"Assistant-Phone"},{vcard:"X-DID",human:"DID"},{vcard:"X-FACEBOOK",human:"Facebook-URL"},{vcard:"X-INTERN",human:"Internal-Number"},{vcard:"X-LINKEDIN",human:"LinkedIn-URL"},{vcard:"X-LOCATION",human:"Location"},{vcard:"X-MANAGER",human:"Manager"},{vcard:"X-SALUTATION",human:"Salutation"},{vcard:"X-TWITTER",human:"Twitter-URL"},{vcard:"X-XING",human:"Xing-URL"}];return _.find(dict,function(obj){return translated===obj.vcard||translated===obj.human?void(translated=translated===obj.vcard?obj.human:obj.vcard):void 0}),translated}var profile={};return profile.init=function(jid){return{jid:jid}},profile.set=function(vCard,empty){var jqEl,text,$=angular.element,self=this,parsed={},isEmpty=empty;return _.each($(vCard).children(),function(el){jqEl=$(el),jqEl.children().length?empty?_.isEmpty($(jqEl.children()[0]).text())||(parsed[el.nodeName]=self.set(el,isEmpty)):parsed[el.nodeName]=self.set(el):(text=jqEl.text(),empty?_.isEmpty(text)||(parsed[el.nodeName]=text):parsed[el.nodeName]=text)}),parsed},profile.util={getFullName:function(){},getPhotoSrc:function(){},translate:function(text){return makeHumanReadable(text)}},profile}])}(),function(){"use strict";uw.factory("request",["$http",function($http){return function(conf){return $http(conf).success(function(data){return data}).error(function(){return new Error})}}])}(),function(){"use strict";uw.factory("notification",["notify","$timeout",function(notify,$timeout){return function(obj){function onDisplay(event){$timeout(function(){event.currentTarget.cancel?event.currentTarget.cancel():event.currentTarget.close()},3e3)}function onClk(event){event.currentTarget.cancel?event.currentTarget.cancel():event.currentTarget.close(),window.focus()}if(document.hasFocus())return!0;var myNotification=new notify(obj.title,{body:obj.body,notifyShow:onDisplay,notifyClick:onClk});return myNotification.isSupported()&&myNotification.needsPermission()&&myNotification.requestPermission(),myNotification.isSupported()&&!document.hasFocus()&&myNotification.show(),!0}}])}(),function(){"use strict";uw.factory("dimensions",function(){var fn=(angular.element,{}),nodeName=fn.nodeName=function(element,name){return element.nodeName&&element.nodeName.toLowerCase()===name.toLowerCase()};fn.css=function(element,prop,extra){var value;return value=element.currentStyle?element.currentStyle[prop]:window.getComputedStyle?window.getComputedStyle(element)[prop]:element.style[prop],extra===!0?parseFloat(value)||0:value},fn.offset=function(element){var boxRect=element.getBoundingClientRect(),docElement=element.ownerDocument;return{width:element.offsetWidth,height:element.offsetHeight,top:boxRect.top+(window.pageYOffset||docElement.documentElement.scrollTop)-(docElement.documentElement.clientTop||0),left:boxRect.left+(window.pageXOffset||docElement.documentElement.scrollLeft)-(docElement.documentElement.clientLeft||0)}},fn.position=function(element){var offsetParentElement,offset,offsetParentRect={top:0,left:0};return"fixed"===fn.css(element,"position")?offset=element.getBoundingClientRect():(offsetParentElement=offsetParent(element),offset=fn.offset(element),offset=fn.offset(element),nodeName(offsetParentElement,"html")||(offsetParentRect=fn.offset(offsetParentElement)),offsetParentRect.top+=fn.css(offsetParentElement,"borderTopWidth",!0),offsetParentRect.left+=fn.css(offsetParentElement,"borderLeftWidth",!0)),{width:element.offsetWidth,height:element.offsetHeight,top:offset.top-offsetParentRect.top-fn.css(element,"marginTop",!0),left:offset.left-offsetParentRect.left-fn.css(element,"marginLeft",!0)}};var offsetParent=function(element){var docElement=element.ownerDocument,offsetParent=element.offsetParent||docElement;if(nodeName(offsetParent,"#document"))return docElement.documentElement;for(;offsetParent&&!nodeName(offsetParent,"html")&&"static"===fn.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||docElement.documentElement};return fn.height=function(element,outer){var value=element.offsetHeight;return outer?value+=fn.css(element,"marginTop",!0)+fn.css(element,"marginBottom",!0):value-=fn.css(element,"paddingTop",!0)+fn.css(element,"paddingBottom",!0)+fn.css(element,"borderTopWidth",!0)+fn.css(element,"borderBottomWidth",!0),value},fn.width=function(element,outer){var value=element.offsetWidth;return outer?value+=fn.css(element,"marginLeft",!0)+fn.css(element,"marginRight",!0):value-=fn.css(element,"paddingLeft",!0)+fn.css(element,"paddingRight",!0)+fn.css(element,"borderLeftWidth",!0)+fn.css(element,"borderRightWidth",!0),value},fn})}(),function(){"use strict";uw.service("sharedFactory",["localStorageService","_","CONFIG",function(localStorage,_,CONFIG){var jid=(CONFIG.keyConversationList,CONFIG.keyArchiveObj,"");this.archive={};var archive=this.archive;return this.init=function(ownJid){jid=ownJid},this.archiveMessage=function(o){var obj=angular.copy(o),done=!1,addr=obj.from&&obj.to?obj.to:obj.from;if(addr=addr.replace(/^\s+|\s+$/g,""),archive[addr]||(archive[addr]=[]),0===archive[addr].length)archive[addr].push(obj);else{for(var i=0;i<archive[addr].length;i++)archive[addr][i].timestamp.toString()===obj.timestamp.toString()&&(archive[addr][i]=obj,done=!0);done||archive[addr].push(obj)}this.saveArchiveObj()},this.flushContactMessageList=function(jid){archive[jid]=[],console.log("flush"),this.saveArchiveObj(archive)},this.savePhotos=function(photos){this.save(CONFIG.keyPhotos,photos)},this.getPhotos=function(){var json=this.get(CONFIG.keyPhotos);return _.isEmpty(json)?[]:json},this.saveRoster=function(roster){this.save(CONFIG.keyRoster,roster)},this.getRoster=function(){var json=this.get(CONFIG.keyRoster);return _.isEmpty(json)?[]:json},this.getGroupChats=function(){var json=this.get(CONFIG.keyGroupChats);return _.isEmpty(JSON.parse(json))?[]:json},this.saveGroupChats=function(groups){this.save(CONFIG.keyGroupChats,groups)},this.getGroups=function(){var json=this.get(CONFIG.keyRosterGroups);return _.isEmpty(json)?[]:json},this.saveGroups=function(groups){this.save(CONFIG.keyRosterGroups,groups)},this.saveGroupsContact=function(obj){var roster=this.getRoster(),groups=this.getGroups();_.extend(roster[obj.jid],obj);for(var i=0;i<groups.length;i++)for(var j=0;j<groups[i].length;j++)(groups[i][j].jid=obj.jid)&&_.extend(groups[i][j],obj);this.saveGroups(groups),this.saveRoster(roster)},this.getContactMessageList=function(contactJid){return archive[contactJid]||(archive[contactJid]=[]),archive[contactJid]},this.delContactMessageList=function(contactJid){archive[contactJid]&&(delete archive[contactJid],this.saveArchiveObj())},this.getConversationList=function(){var json=this.get(CONFIG.keyConversationList);return _.isEmpty(json)?[]:json},this.saveConversationList=function(list){this.save(CONFIG.keyConversationList,list)},this.saveConversationListContact=function(){},this.saveArchiveObj=function(){this.save(CONFIG.keyArchiveObj,archive)},this.getArchiveObj=function(){this.archive=this.get(CONFIG.keyArchiveObj),"string"!=typeof this.archive&&_.extend(archive,this.archive)},this.save=function(key,json){var suff=this.getUserSuffix();if(suff){var str=angular.toJson(json);localStorage.add(key+suff,str)}},this.get=function(key){var str=localStorage.get(key+this.getUserSuffix())||"{}";return str},this.getUserSuffix=function(){var user=jid;return""===user?!1:"."+user},this.decodeBase64=function(base64,cb){for(var rank,code,undef,base64Ranks=new Uint8Array([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]),len=base64.length,buffer=new Uint8Array(len/4*3|0),i=0,outptr=0,last=[0,0],state=0,save=0;len--;)code=base64.charCodeAt(i++),rank=base64Ranks[code-43],255!==rank&&rank!==undef&&(last[1]=last[0],last[0]=code,save=save<<6|rank,state++,4===state&&(buffer[outptr++]=save>>>16,61!==last[1]&&(buffer[outptr++]=save>>>8),61!==last[0]&&(buffer[outptr++]=save),state=0));return cb(buffer),buffer},this.settings={mainMenu:[{name:"Activity List",url:"views/activitylist.html",iconClass:"icon-activity_stream",show:"true"},{name:"Contacts",url:"views/rosterlist.html",iconClass:"icon-contacts",show:"true"},{name:"Conference Bridge",url:"views/conference-bridge.html",iconClass:"icon-conference_call",type:"right",show:"true",fn:"conference"},{name:"Voicemails",url:"views/voicemails.html",iconClass:"icon-voicemail",type:"right",show:"true",fn:"voicemail"},{name:"My profile",url:"views/my-profile.html",iconClass:"icon-my-profile",type:"right",show:"true",fn:"profile"},{name:"Settings",url:"views/settings.html",iconClass:"icon-settings_cogs",type:"right",show:"true"},{name:"Search",url:"views/search.html",iconClass:"icon-settings_cogs",show:"false"},{name:"Chat",url:"views/chat.html",iconClass:"icon-settings",type:"right",show:"false"},{name:"default",url:"views/default-right.html",iconClass:"icon-settings_cogs",type:"right",show:"false"}],miniTemplates:[{name:"Profile",url:"views/profile.html"}],defaultPresences:[{icon:"icon-status_available",show:"Available",status:"",color:"#38b427"},{icon:"icon-clock_fill_away",show:"Away",status:"away",color:"#f18703"},{icon:"icon-presence_dnd",show:"Do not disturb",status:"dnd",color:"#e3352d"},{icon:"icon-clock_fill_xa",show:"Extended away",status:"xa",color:"#0d73b5"},{icon:"icon-presence_invisible",show:"Invisible",status:"invisible",color:"#bdbfc0"}],defaultLocations:[{icon:"",text:"Home"},{icon:"",text:"At work"},{icon:"",text:"On the road"}]},this.defaultImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAIAAABMXPacAAAQOUlEQVR42uVdaVsbuw7m//+xW9q0lKVNgIQtoSEsIWEv630Pas0wtmVJ9kw4z/GHPnSi8XgsW8srWbPUeW1fvnzppJqEpoUWG8aX16Yiq92ifVnhhDBkGxsbS609z8w/1cxWJzeTJjngfAasr68vaadGMrIgmeSK5B2YWwxki93xP3/+XOr8t5tqEdhWHsPLMAMyxVE766sdGV2TSEmRFSOL0TSyAz7OBi+1riUzqyJzV378+LEkn4jkWFXqK0cnf7R1wMsD5td/GNCmpWhWm4tlAGi+fv2q7VZC2RQDiisMXphS+/z5c00aZPoBtcUR3NwxGmZhVQeZYECwF6FVLlwLcvlbnV/+rarEBXnv35sUyMkHFVDCTYt7uvfbt28rKyvwG/v9/sHBweFrG1caXcFPIAAZiCE0hAqpHWHbnh+g9YaCNFjCy8vL+Pf79++bm5v7+/uY5dPT08vLy9+/fz+8tse/7enpia7gJxCADMS4ZWtrC7e7rsxaKp+FNfnh/vvGgCaWiXCH1l7182sjN317e3s0Gs1ms7u7O8zyi6w9Pz+DGMzAjbgdnaArYmpzu8HW85sOSBpSMR8k0+QIKrHV1VVIkul0innHusaEvpgabsTt6ARdoUN0m2kdSaCkoKqP0fzxA2J6ldH4QtBNpQNxBbK+1+tNJpPr62u35B0DhJzw6dEVOkS36Jx0g2QdSPyezM3xZwf4jG0Bna69M+QDNOfe3t58Pr+/v+dnVssAaugWne/u7kIxJA0kM+yjonmnAxaCDbjnwnQZDofVhd9Eo62AB+Fxi3rlhBVkG1OmDsBOhHyILfziDQ/C4/DQhSNR7xiQ9LCEKldr4WEQmA4YLUFRw4id59eWFEdBiYTH4aF4NEk/uZEmVNRCsjclLDSEghrbN3KTLnt19o+Pj2GruMmiaXp+32KTHqQRkuGheDTxgIfyfRRTMumSqIAdC8p0MuleKMOjoyMIBLOhmS+LMAAM4wPpAPnkypGQ4FqAzQODBEb6y0IbBoBhYDBOELWpmf9hgDAwLQ+zJRmAV4W9D8/o8vKSsSNj4iUo5WM0jPhyDcPAYGhgEnniR1d4acyQiTzh4jAc3nN9ff3k5IREv0SdPntNQiakIWWAIdWwCkbb5WNHbyHJpM50sYhSjhg6hMMFO2RRot9nCQaDIQWdZC0ErfJhdSHJoDGqjQ1glXW73fPzc4kFqfJ7c8jwK4aEgUkAu/x9kMWA/FDGaDR6fHzMnNDiDYIIA5MHiJIWp0R8pcE4xq43ZMBhj6+trU2nU9UsB4l9wz9zc+BfDAzDkwdBkwRJmjAYZwb0k2sHDIC9cX19/fIhGwY2GAwwyKpvHFt8vASOWUG1qX5nBWkdK2ZPxIwf53nZVmtZ6eT3hoGNx2MKohkEvQGZ4CJipfJ2qqtgY2NjNpsZ5lHInkwyXMfwyB6VOKcxfSAkS0AR/nLOz8nd3Ny8ubkpslolbpc2YICG4fV6PUk4TD7dzLRkYUEqy3d5eZnMf8IenN6L4WX+HzGPjAHjgtAe70WTQwBHPQiRFg8ac1kR8ixwIQNWV1cnk4nzfmMMqAkKZspiNEG2BYWPz4Cnpyd4xRiqigFmcR1lAIMF2WIvYABkK5wdCngl3SI5ziMBHuRCCcM7OzuDMcoYQsJwMZ+oy8HRtpgw70yAAdDAEgdYaOM3pKjJJcZa+fTpUzKuIom9SJNzi/jDMXWEhvcBAy4uLszzkgTabICdTzmfzzFUYgAvbCV2J78J3sC4IlqF6Qc7ANyO4c8fp4EZjgHNxcbrUESp5IZgVwSmOgbE1KbERiwSGRYyAAM2JDtpxXiCAaUSN0gE4WEQQe17vLYdUGOA0NFhcsiDkxkG42I4lMFIdY10AN6tlBfGR+FztHdsB/BpCfxJsdiVd1aQ1vhJJvjVgCDeCmp/1cf4SmhElQFCx1i+Y6J5Qc35HRSGPD09bTTxrUjqHAYJPyAmgmxgXEw0KdLTMyOi5AmPx+OqJ/wB2+PjowNEC+bmxMhEUER+Ei41mEPVPBRbTIaBImJqgEGE/K5ccFgFiP4LwDiXB0euAA+fMY6SAYyT90YpKr1er7hA1u2AZIAsZnUl4RE5GtFEoCZJBgVAOIQWiTEfBSyWHS3UwysrK79+/VJlQRe0jpIGGAaG4TWBRavR0LLOdzWtdWtr6+rqSjXRSbQ5Fo2R0FT/wMAwvDbPDYgiYqqdyKfnUUIu7DyJG9UaGOeuY2Du8IxEl2qPTPtT9y49PWftC4E5CnYPh0OJFCqIBUl6w5AODg6SxxF5zFlom7yLCZcNvif1MHiAp8Y8MkmMxRaF5ynJ/8LAhOa/5EqZWhGG5ZBssLIHg8Ht7S0jSdpJWXQ0GAxlBMnRNz5WyNBUybICMlp0sEoAU+/o6EjrFZeyiGp7go6MBa1PYaqPWYmqlbDkYjLJjrxi+DvVELE5gCUnCxJgANPplJwvm48pnxa1GdqcQUYnZLDrbWlCBRsG0O/3YfvH5kt4Pi4WiOex6/QOyOcBs4uxD0ajEeTvoiIzeDQG4OqqSAK5ySixKoGugB+QyRtIXjifNR7EsrK0xj6floKH4tG+6FetuUw0tIwjZtZIdK/jQTAbJQaf8VZmkoZm3z8vL6zFUR6ME0JvfHiST5D3NyBVpiEeHB4e1ngQW7kxPgmTi/AHHoTHra2tudpajOueNDQYpR38KVwvqIgIsu1HV6JmZ2dnPp/7DlpBQBSd4xF4EB4nPOvSKhhn2IAqjc0cqqGzq9vb2/BI/fN7yWQWSSQH3aJzPILwzoJ1sMxkbydkiuQCyYsWBk8ckl2EMQ2Hw9lsxpwj0wIS6Aodolt0zh+F5FNDmFeT1M8Nm6FNgHESSIv3XzCy8Xh8dXWFZYvpM5TswEXciNvRCbqi2ihy75JfZ/l8agQLyiyFXrsdnhpE5P7+/tnZGdQmFefj1zv9CjIQ4xbciNvxkuhKKAkdWtUR1+E3Z4g2DsblpPNRQjUa5DVGCcG9t7cHw3E6nWJFw33F/N7d3f1+bfgD/8VF/AQCkIEYt+BG3E79FAxyGY6G2RlgQH4MBy6Tb0vTB9MFe6Lf7w8Gg93d3b2/DX/DsMFFTDoIqPpJrdArj1bm5BvYJFuCAS0bZMK5oLX86bX9L9LwE633sjUFFhCSbJMN/FJ1a9mVFCUxXW3uSm3fxDght5gXDMYVmVwbA6oDxcxC/nS7XacMJpPJyckJ1CyEPv6FgY8rsHZga0IcgRKOLmGcwdr9BgGiAuOSFT9bBeNsuaQ07xsbGxDxmNbj42PY8peXl1C29/f3Dw8PziiiBsuHyrReX1/D3aUCxrgXzIAVlAyymzMB+dIMdiyoOPwgVFwkwTFlVDIay5xmPGmD1uxRMkZxL7bIaDTa2tqiyrlBi0hStzZ/i/uUIgY0B8b5vWHJkPmPJQ+bknfB5GgEmAFOYEP0er2qjdSJlLnigRlhvFcCxtVFUCYWlEPmyrceHBxAgFSrddti9z49thGYCv1BXrFvpxrWdeZbt4GGJh0FmggsTBjyEBfBSlrJk9mx6E0w/+f8/ByaHFq6hgtJ3KtSiEun+gWNsvpW9YEQMhYxF5A5ULDtHN8AY5xE6vyt1cdbPow4Ur17AAuyVflPOpaSx9ObQ+xALNjqV+ZUSIHJhA0Hu9aPCecbFIqSZQWdbC16hT+wBmEv1hKEhJUok8BcsjdsuIuLC/CgWjfU8JoFMuPKJmYlVbpTuZh9Oe7fxAk9qk3Q7/eDp2I64io1vEFlh6Mz4TnGpiLE31WNLjiz2hAmhWvgKPixmqZtpMJWkJxh0Lp+NspiD0eenZ1RqabMzNesmHA7YBwsThj7rX0tQM4DeN30uR9J+T2bFa4QQTZMn7f6yeSH0uNrFjA5JsEzjsIDMMwf1OCCjEYjUshyMC6nmr0djDPnTGD5Hx8fB3NPYgcZSx2DSVY2e3mtXEmGqTCCViwzLv+7fsmnUuLJzs5OrW4on+3s56RkJmbxmwAKGYKITsprkQY+ua1GRkCp7qB28uNOfE4AnRN2KekFTxeVtaNgGmCVuFhCDgjR0R5TbQ6MI+EDCVvVvUwWfykGGA6aYX3AKo0VrywbDil5TDVZMBnyLla1dYHfDwhSQhvDTiNNwJz7lIvfmCwqnJjFbMxaoYgP3sASuAV0Zk+ePyohU4NxRUwjKhYE44dQhzY/DGCWYzc3N4PBwCzoi4FxwrWftD6paPoHr1dW88smk4nk3KShZrfiGzKSzLhkhBKvMRwOa6CbsM5zc0ImSTCfz51jrA1J8jQlwbhkqgFVrcdqUrm+LRycT5Jhy25ubvq1O1o6plqqYfR0IrXImd7kMdWkgZssZlwt3uSQieJ5N1kBGe0WqXq/qmC6xDYtpX59MgfPOVso55TkIhOzoAD8SmWquYuhbCowjsfpggyYTqfwlXgGJLMTO3zJMsnB9hrGIGnVpx4eHkq+0Sx0jCVQT6aF6q5AD3e7XVvmloQsUbiVSVeKTbffYAJBA8fSHSSfGjTPtTxiHCO7urra3t7umIpGSBgQwIJyAInggKDEXIUmYZ2mhWBBwSu3t7dw4GPHyvLNoSgYZ8MngrfABo19OKzsp3maiOzTt1aZc32ZmrJevj55yC8ZDPLHBAbUbFDVN1KTu0RFoyWrfWNSWK1ZXtT5zw6Q6HHzPgADZrNZZmZn5hYxPw4M2N/fZxigFfodpnZ0MpSsjcm5GKTPgI8AAUmeCOOtyoDi4YHADtDibkl4lkRQWSChteZ2gMQZNhwUSJuhOQXteQYIvaGPwwDtJwQ67Ed1mvWEa2kQMREkmfqGSpYJYSUSQX49rZwM2sIhyeR28xkQhMNsn65qLl+xugNqgKgwe06S5Rj4gob8UyVmBshBoSIAQw4vaztAmPYarOOqQ0NVhXR4cML5AbHPCzJwsWr6JAWlGekU7KdqBeV8PS/GHg6ME36nJgnG+Y5YcoIaAuMksx9kgKsvJEmJUJ1VyfqgszBYGmSA5BOPBUuWGXKNXEzG1wESOECdmthELrRjAOOIfcDMuCAD/h1gnIEBLYNxWic5aYZ+RDAuyQD5hEoQNImeSBr+SR2QyYAYmcIPMHwmRY4FCb+Dl3Ni2/adPQYLkhdfsIBxHf2J35jnrdUBCwEkYk/MB+N0DEgmG6nMXqEOWGyGlnAHVM1QSWo+Ez8IV00seECjxrCYI9ZcfmfB8IAEiug0UbKsk/ElM98Rox0g/PJ7O2CcpKsFgHEFi+3xYJwkmN7y4eEgDeMJJyWzBC8KlKvJ2RBBAEMORSwwRhbjkAGMU1XhUlRN1OJx7roKC2p6H2jJgjugSGisHhEz9xhMzDLvADMPGkpLiSnhUolZ76wg+ck/n8DV+vU3YDIrogUw7kV8TNWABeWcWHpXM64he7TKANsC/y+CcZ0Sx1STDGg/M87mCSfN0FwGxL4BkPk8BowrtfBVJqbBEq1BEWUTs+jbLUsbrw3a4Odr+1FpPyut9t/qdfrJ/Vu9gtbr9S4uLhqSPE1vkYeHh/F43O12/WnxJyQ4df40uoZpHwwG/wc1kGJ/hI+0pQAAAABJRU5ErkJggg==",this}])}(),function(){"use strict";uw.service("restService",["$rootScope","$http","$q","$sce","request","xmlParser","CONFIG","_",function($rootScope,$http,$q,$sce,request,xmlParser,CONFIG,_){function initSipRest(){return{getCDRlog:function(limit){return request(authHeaders({method:"GET",url:baseRest+"/my/redirect/cdr/"+self.cred.user+"?limit="+limit}))},getUserInfo:function(user){return request(authHeaders({method:"GET",url:baseRest+"/my/redirect/search/phonebook?query="+user}))},getMessages:function(folder){return request(authHeaders({method:"GET",url:baseRest+"/my/redirect/mailbox/"+self.cred.user+"/"+folder}))},getMessage:function(id){return request(authHeaders({method:"GET",url:baseRest+"/my/redirect/media/"+self.cred.user+"/inbox/"+id,responseType:"arraybuffer"}))},putHeardMsg:function(id){return request(authHeaders({method:"PUT",url:baseRest+"/my/redirect/mailbox/"+self.cred.user+"/message/"+id+"/heard",data:{}}))},getHeardMsg:function(id){return request(authHeaders({method:"GET",url:baseRest+"/my/redirect/mailbox/"+self.cred.user+"/message/"+id+"/heard"}))},putTrashMsg:function(id){return request(authHeaders({method:"PUT",url:baseRest+"/my/redirect/mailbox/"+self.cred.user+"/message/"+id+"/delete",data:{}}))},getActiveGreeting:function(){return request(authHeaders({method:"GET",url:baseRest+"/my/redirect/mailbox/"+self.cred.user+"/preferences/activegreeting"}))},delActiveGreeting:function(){return request(authHeaders({method:"DELETE",url:baseRest+"/my/redirect/mailbox/"+self.cred.user+"/preferences/activegreeting"}))},putActiveGreeting:function(greeting){return request(authHeaders({method:"PUT",body:"<activegreeting>"+greeting+"</activegreeting>",url:baseRest+"/my/redirect/mailbox/"+self.cred.user+"/preferences/activegreeting"}))},postBasicCall:function(to){return request(authHeaders({method:"POST",url:baseRest+"/my/redirect/callcontroller/"+self.cred.user+"/"+to}))},getBasicCall:function(to){return request(authHeaders({method:"GET",url:baseRest+"/my/redirect/callcontroller/"+self.cred.user+"/"+to}))},getConfList:function(){return request(authHeaders({method:"GET",url:baseRest+"/my/conferences"}))},putConfLock:function(name){return request(authHeaders({method:"PUT",url:baseRest+"/my/conference/"+name+"/lock"}))},putConfInvite:function(conf,to){return request(authHeaders({method:"GET",url:baseRest+"/my/conference/"+conf+"/invite&"+to}))},getConfPartList:function(conf){return request(authHeaders({method:"GET",url:baseRest+"/my/conference/"+conf+"/xml_list"}))},getConfKick:function(conf,to){return request(authHeaders({method:"GET",url:baseRest+"/my/conference/"+conf+"/kick&"+to}))},getConfMute:function(conf,to){return request(authHeaders({method:"GET",url:baseRest+"/my/conference/"+conf+"/mute&"+to}))},getConfUnmute:function(conf,to){return request(authHeaders({method:"GET",url:baseRest+"/my/conference/"+conf+"/unmute&"+to}))},getConfDeaf:function(conf,to){return request(authHeaders({method:"GET",url:baseRest+"/my/conference/"+conf+"/deaf&"+to}))},getConfUndeaf:function(conf,to){return request(authHeaders({method:"GET",url:baseRest+"/my/conference/"+conf+"/undeaf&"+to}))},getConfPin:function(conf,pin){return request(authHeaders({method:"GET",url:baseRest+"/my/conference/"+conf+"/pin&"+pin}))},getPhonebook:function(){return request(authHeaders({method:"GET",url:baseRest+"/my/phonebook",headers:{Accept:"application/json"}}))},putPassword:function(pass){return request(authHeaders({method:"PUT",url:baseRest+"/my/portal/password/"+pass,data:{}}))},getImBot:function(){return request(authHeaders({method:"GET",url:baseRest+"/my/imbot/prefs"}))},putImBot:function(data){return request(authHeaders({method:"PUT",url:baseRest+"/my/imbot/prefs",data:data}))},getSpeeddial:function(){return request(authHeaders({method:"GET",url:baseRest+"/my/speeddial"}))},putSpeeddial:function(data){return request(authHeaders({method:"PUT",url:baseRest+"/my/speeddial",data:data}))},getContactInfo:function(){return request(authHeaders({method:"GET",url:baseRest+"/my/contact-information",headers:{Accept:"application/json"}}))},putContactInfo:function(data){return request(authHeaders({method:"PUT",url:baseRest+"/my/contact-information",data:data}))},getLogindetails:function(){return request(authHeaders({method:"GET",url:baseRest+"/my/logindetails",headers:{Accept:"application/json"}}))}}}function parseConfXml(xml,cb){var $=angular.element,base=$(xml),obj={},result={},arr=[],children=null,sChildren=null,confDetails=null,notFound=0===base.children().length,isConfPartList=base.find("members").length>0;return notFound?void cb(null):isConfPartList?(confDetails=base.children().children(),base=base.children().children().children().children(),_.each(base,function(member){children=$(member).children(),_.each(children,function(sEl){sChildren=$(sEl).children(),sChildren.length>0?_.each(sChildren,function(ssEl){obj[$(ssEl)[0].localName]=filterXmlValue($(ssEl)[0].textContent)}):obj[$(sEl)[0].localName]=filterXmlValue($(sEl)[0].textContent)}),arr.push(obj),obj={}}),result[parseAttrs(confDetails).name]=arr,void cb(result)):void 0}function parseXml(xml,cb){var $=angular.element,children=$(xmlParser.parse(xml).children)[0].children,arr=[],attrs=[],obj={},subChildren=[];_.each(children,function(child){attrs=$(child)[0].attributes,subChildren=$(child)[0].children,_.isEmpty(attrs)||(obj=parseAttrs(child),_.isEmpty(obj)||(arr.push(obj),obj={})),_.isEmpty(subChildren)||(_.each(subChildren,function(c){switch($(c)[0].tagName){case"caller_aor":obj.from=$(c)[0].textContent;break;case"callee_aor":obj.to=$(c)[0].textContent;break;case"start_time":obj.start=$(c)[0].textContent;break;case"duration":obj.duration=$(c)[0].textContent;break;case"timestamp":case"call-id":case"method":break;case"status-line":obj.status=$(c)[0].textContent}}),_.isEmpty(obj)||(arr.push(obj),obj={}))}),cb(arr)}function parseAttrs(NamedNodeMap){var attrs=angular.element(NamedNodeMap)[0].attributes,obj={};return _.each(attrs,function(attr){obj[attr.name.toString()]=filterXmlValue(attr.value.toString())}),obj}function filterXmlValue(val){var value=val;switch(value.toLowerCase()){case"true":case"yes":case"1":value=!0;break;case"false":case"no":case"0":value=!1;break;default:value=_.isNaN(parseInt(value))?unescape(val):parseInt(value)}return value}function authHeaders(conf){return conf}var baseRest=CONFIG.baseRest,sipRest=initSipRest(),msgUrls={},self=this;this.cred={user:"",pass:""},this.connected=!1,this.phonebook=null,this.activityList=null,this.updateCredentials=function(user,pass){this.cred.user=user||null,this.cred.pass=pass||null},this.getCDRlog=function(limit){var deferred=$q.defer();return sipRest.getCDRlog(limit).success(function(data){parseXml(data,function(parsed){deferred.resolve(parsed)})}).error(function(e){deferred.reject(e)}),deferred.promise},this.getMessages=function(folder){var deferred=$q.defer();return sipRest.getMessages(folder).success(function(data){parseXml(data,function(parsed){deferred.resolve(parsed)})}).error(function(e){deferred.reject(e)}),deferred.promise},this.getMessage=function(id){var blob,deferred=$q.defer();return msgUrls[id]?deferred.resolve(msgUrls[id]):sipRest.getMessage(id).success(function(data){blob=new Blob([data]),msgUrls[id]=$sce.trustAsResourceUrl(window.URL.createObjectURL(blob)),deferred.resolve(msgUrls[id])}).error(function(e){deferred.reject(e)}),deferred.promise},this.delMessage=function(id){var deferred=$q.defer();return sipRest.putTrashMsg(id).success(function(data){delete msgUrls[id],deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.heardMessage=function(id){var deferred=$q.defer();return sipRest.putHeardMsg(id).success(function(data){console.log(data),deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getHeardMessage=function(id){var deferred=$q.defer();return sipRest.getHeardMsg(id).success(function(data){console.log(data),deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.postBasicCall=function(to){var deferred=$q.defer();return sipRest.postBasicCall(to).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getBasicCall=function(to){var deferred=$q.defer();return sipRest.getBasicCall(to).success(function(data){parseXml(data,function(parsed){deferred.resolve(parsed)})}).error(function(e){deferred.reject(e)}),deferred.promise},this.getConfList=function(){var children,subChild,deferred=$q.defer(),$=angular.element,result=[],obj={};return sipRest.getConfList().success(function(data){children=$(data).children(),_.each(children,function(child){subChild=$(child).children(),obj={},_.each(subChild,function(info){obj[$(info)[0].tagName.toLowerCase()]=$(info)[0].textContent.toLowerCase()}),result.push(obj)}),deferred.resolve(result)}).error(function(e){deferred.reject(e)}),deferred.promise},this.putConfInvite=function(conf,to){var deferred=$q.defer();return sipRest.putConfInvite(conf,to).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getConfPartList=function(conf){var deferred=$q.defer();return sipRest.getConfPartList(conf).success(function(data){parseConfXml(data,function(parsed){deferred.resolve(parsed)})}).error(function(e){deferred.reject(e)}),deferred.promise},this.getConfKick=function(conf,to){var deferred=$q.defer();return sipRest.getConfKick(conf,to).success(function(data){deferred.resolve(data)
}).error(function(e){deferred.reject(e)}),deferred.promise},this.getConfMute=function(conf,to){var deferred=$q.defer();return sipRest.getConfMute(conf,to).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getConfUnmute=function(conf,to){var deferred=$q.defer();return sipRest.getConfUnmute(conf,to).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getConfDeaf=function(conf,to){var deferred=$q.defer();return sipRest.getConfDeaf(conf,to).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getConfUndeaf=function(conf,to){var deferred=$q.defer();return sipRest.getConfUndeaf(conf,to).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getConfPin=function(conf,pin){var deferred=$q.defer();return sipRest.getConfPin(conf,pin).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getPhonebook=function(){var deferred=$q.defer();return sipRest.getPhonebook().success(function(data){$rootScope.$broadcast("services.rest.phonebook",{}),deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.putPassword=function(pass){var deferred=$q.defer();return sipRest.putPassword(pass).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getImBot=function(){var deferred=$q.defer();return sipRest.getImBot().success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.putImBot=function(data){var deferred=$q.defer();return sipRest.putImBot(data).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getSpeeddial=function(){var deferred=$q.defer();return sipRest.getSpeeddial().success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.putSpeeddial=function(data){var deferred=$q.defer();return sipRest.putSpeeddial(data).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getContactInfo=function(){var deferred=$q.defer();return sipRest.getContactInfo().success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.putContactInfo=function(data){var deferred=$q.defer();return sipRest.putContactInfo(data).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getLogindetails=function(){var deferred=$q.defer();return sipRest.getLogindetails().success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getAllImages=function(phonebookList){function createPromiseArray(array){var promises=[];return _.each(array,function(entry){entry["contact-information"]&&entry["contact-information"].avatar?(avatarUrl=entry["contact-information"].avatar.split("/sipxconfig/rest")[1],url=CONFIG.baseRest+avatarUrl):url="",promises.push($http.get(url,{cache:!0,responseType:"arraybuffer"}))}),promises}function createObjectURL(array,values){var blob,url;array.forEach(function(el,i){_.isUndefined(values[i])||(blob=new Blob([values[i].data],{type:"image/png"}),url=window.URL.createObjectURL(blob),array[i].avatar=url)})}var promises=createPromiseArray(phonebookList),avatarUrl="",url="";$q.all(promises).then(function(responses){createObjectURL(phonebookList,responses)})}}])}(),function(){"use strict";uw.service("uiService",["$rootScope","$interval","sharedFactory","restService",function($rootScope,$interval,sharedFactory,restService){var activityList={main:null},rosterList={main:null,noGroups:null},search={t:""},timers={all:{}},groupChat={modal:!1},ui={root:{templates:sharedFactory.settings.mainMenu,template:sharedFactory.settings.mainMenu[0],oldTemplate:sharedFactory.settings.mainMenu[0]},groupChat:{showModal:function(){groupChat.modal=!groupChat.modal},hideModal:function(){groupChat.modal=!groupChat.modal,groupChat.serverRooms=null}},activityList:{selectConversation:function(){},removeConversation:function(entry){var spliceFromActiList=function(){_.find(activityList.main,function(obj){return obj.jid===entry.jid?(activityList.main.splice(_.indexOf(activityList.main,obj),1),sharedFactory.saveConversationList(angular.copy(activityList.main)),!0):void 0})};spliceFromActiList(),sharedFactory.delContactMessageList(entry.jid)}}},secondary={template:{main:ui.root.templates[ui.root.templates.length-1]},chat:{info:{jid:null,name:"",show:"",status:"",photoSrc:"",outMsg:"",myChatstate:"",groupChat:!1,chatPart:{}},messages:[],sendMessage:function(){},keyPress:function(){},changeContact:function(){},getMessages:function(){},addMessage:function(msg,acc){var message=angular.copy(msg);acc||(acc=secondary.chat.messages);var previous=acc.pop();if(previous){if(previous.fromNormal===message.fromNormal)return previous.grouped.push(message),acc.push(previous),previous;acc.push(previous)}var tmp=angular.copy(message);return delete tmp.grouped,message.grouped=[tmp],acc.push(message),message},showDefault:function(){util.changeView(ui.root.templates[8]),secondary.chat.info={jid:null,name:"",show:"",status:"",photoSrc:"",outMsg:"",myChatstate:"",groupChat:!1,chatPart:secondary.chat.info.chatPart},secondary.conference.participants=[],secondary.voicemail.messages=[],secondary.conference.active=!1,secondary.conference.timers.cancelAll(!0)}},voicemail:{messages:[],folders:[{name:"inbox"},{name:"saved"},{name:"deleted"},{name:"conference"},{name:"all"}],init:function(){secondary.chat.info.jid=0,secondary.voicemail.messages=null,restService.getMessages("inbox").then(function(messages){secondary.voicemail.messages=messages},function(er){console.log(er)})},changeFolder:function(){var folder=secondary.voicemail.folder.name;"all"===folder&&(folder="messages"),secondary.voicemail.messages=null,restService.getMessages(folder).then(function(messages){secondary.voicemail.messages=messages},function(er){console.log(er)})},getMessage:function(id,index){secondary.voicemail.messages[index].loading=!0,restService.getMessage(id).then(function(url){return secondary.voicemail.messages[index].href=url,delete secondary.voicemail.messages[index].loading,secondary.voicemail.messages[index].heard?void 0:restService.heardMessage(id)}).then(function(){return secondary.voicemail.messages[index].heard?void 0:restService.getHeardMessage(id)}).then(function(){secondary.voicemail.messages[index].heard=!0,delete secondary.voicemail.messages[index].loading})},delMessage:function(id,index){secondary.voicemail.messages[index].loading=!0,restService.delMessage(id).then(function(){secondary.voicemail.messages.splice(index,1)},function(er){console.log(er)})}},conference:{rooms:null,select:null,active:null,refresh:null,status:null,pin:null,btnDisabled:!1,participants:[],init:function(){secondary.chat.info.jid=0,secondary.conference.rooms=null,secondary.conference.refresh=null,secondary.conference.status="Searching for conference rooms...",restService.getConfList().then(function(data){secondary.conference.rooms=data,secondary.conference.select=data[0],secondary.conference.status="Success!"},function(er){console.log(er),secondary.conference.status="Error!"}).then(function(){secondary.conference.status="Waiting for an active conference room...",secondary.conference.timers.start("confActive")})},changeRoom:function(){console.log(secondary.conference.select)},moveHere:function(item){var intern,confName=angular.copy(secondary.conference.select.name),entry=angular.copy(item),uniq=_.find(secondary.conference.participants,function(part){return part.name===entry.name?!0:void 0});return secondary.conference.active?(intern=entry.number,secondary.conference.participants.push(entry),void restService.putConfInvite(confName,intern).then(function(data){console.log(data)},function(er){console.log(er)})):_.isUndefined(uniq)?void secondary.conference.participants.push(entry):void 0},remove:function(index){secondary.conference.participants.splice(angular.copy(index),1)},call:function(){var confName=angular.copy(secondary.conference.select.name);secondary.conference.active?(secondary.conference.status="Kicking participants & hanging up...",secondary.conference.btnDisabled=!0,restService.getConfKick(confName,"all").then(function(){secondary.conference.timers.cancelAll(!0),secondary.conference.active=!1,secondary.conference.btnDisabled=!1,_.each(secondary.conference.participants,function(part){part.conf&&(part.conf.active=null)})},function(er){console.log(er)})):(secondary.conference.status="Calling...",_.each(secondary.conference.participants,function(item){restService.putConfInvite(confName,item.number).then(function(){},function(er){console.log(er)})}),secondary.conference.status="Call in progress...",secondary.conference.btnDisabled=!0,secondary.conference.timers.start("confActive"))},mute:function(item){var confName=angular.copy(secondary.conference.select.name),entry=angular.copy(item);entry.conf.can_speak===!0?restService.getConfMute(confName,entry.conf.id).then(function(data){console.log(data)},function(er){console.log(er)}):entry.conf.can_speak===!1&&restService.getConfUnmute(confName,entry.conf.id).then(function(data){console.log(data)},function(er){console.log(er)})},deaf:function(item){var confName=angular.copy(secondary.conference.select.name),entry=angular.copy(item);entry.conf.can_hear===!0?restService.getConfDeaf(confName,entry.conf.id).then(function(data){console.log(data)},function(er){console.log(er)}):entry.conf.can_hear===!1&&restService.getConfUndeaf(confName,entry.conf.id).then(function(data){console.log(data)},function(er){console.log(er)})},keyPress:function(e){46==e.keyCode||8==e.keyCode||(e.keyCode<48||e.keyCode>57)&&secondary.conference.pin.length>6&&e.preventDefault()},kick:function(item){var confName=angular.copy(secondary.conference.select.name),entry=angular.copy(item);restService.getConfKick(confName,entry.conf.id).then(function(){},function(er){console.log(er)})},timers:{all:{},maxTimeouts:20,currentTimeouts:0,start:function(type){var conf,exists,found,interval;switch(type){case"confActive":secondary.conference.refresh=null,timers.all.confActive||(timers.all.confActive=[]),interval=$interval(function(){restService.getConfPartList(secondary.conference.select.name).then(function(data){null!==data?(secondary.conference.status="Call in progress...",_.each(data[Object.keys(data)[0]],function(member){conf={id:member.id,can_hear:member.can_hear,can_speak:member.can_speak,mute_detect:member.mute_detect,active:!0},exists=_.find(secondary.conference.participants,function(part){return part.number.toString()===member.caller_id_number.toString()?(part.conf=conf,!0):void 0}),exists||(found=_.find(restService.phonebook,function(item){return member.caller_id_number.toString()===item.number?(_.extend(item,{conf:conf}),secondary.conference.participants.push(item),!0):void 0}),found||secondary.conference.participants.push({name:member.caller_id_name,conf:conf}))}),secondary.conference.active=!0,secondary.conference.btnDisabled=!1):(secondary.conference.status="Waiting for an active conference room...",secondary.conference.active=!1,secondary.conference.btnDisabled=!1,_.each(secondary.conference.participants,function(part){part.conf&&(part.conf.active=null)}),secondary.conference.timers.cancelAll())},function(err){secondary.conference.btnDisabled=!1,secondary.conference.status="Error!",console.log(err)})},1500),timers.all.confActive.push(interval)}},cancelAll:function(force){function stopTimers(){var keys=Object.keys(timers.all);_.each(keys,function(key){-1!==key.indexOf("conf")&&_.each(timers.all[key],function(timer){$interval.cancel(timer)})}),secondary.conference.refresh=!0,secondary.conference.timers.currentTimeouts=0,secondary.conference.status="No active conference rooms have been found. Please click to refresh: "}return force?void stopTimers():secondary.conference.timers.currentTimeouts<secondary.conference.timers.maxTimeouts?void secondary.conference.timers.currentTimeouts++:void stopTimers()}}},profile:{init:function(){secondary.jid=null,secondary.profile.info.name=null,secondary.profile.info.location=null,secondary.profile.info.photoSrc=null,restService.getContactInfo().then(function(data){secondary.profile.info.profile=util.deepExtend(secondary.profile.info.profile,data["contact-information"])},function(err){console.log(err)})},save:function(){var info={"contact-information":util.deepRemoveEmpty(angular.copy(secondary.profile.info.profile))};restService.putContactInfo(info).then(function(data){console.log(data)},function(err){console.log(err)})},info:{name:null,location:null,photoSrc:null,profile:{alternateEmailAddress:"",alternateImId:"",assistantName:"",assistantPhoneNumber:"",cellPhoneNumber:"",companyName:"",didNumber:"",emailAddress:"",facebookName:"",faxNumber:"",firstName:"",homeAddress:{street:"",city:"",state:"",country:"",zip:""},city:"",country:"",state:"",street:"",zip:"",homePhoneNumber:"",imDisplayName:"",imId:"",jobDept:"",jobTitle:"",lastName:"",linkedinName:"",location:"",officeAddress:{street:"",city:"",state:"",country:"",zip:"",officeDesignation:""},officeDesignation:"",twiterName:"",useBranchAddress:"",xingName:""}}}},util={openChat:null,populateContactList:function(){rosterList.main=restService.phonebook,activityList.main=restService.activityList,restService.getAllImages(rosterList.main)},getContactDetails:function(){},getConversation:function(){},updateConversation:function(){sharedFactory.saveConversationList(angular.copy(activityList.main))},prependConversation:function(obj){activityList.main.unshift(obj),sharedFactory.saveConversationList(angular.copy(activityList.main))},appendConversation:function(obj){activityList.main.push(obj),sharedFactory.saveConversationList(angular.copy(activityList.main))},onNewMessage:function(){},createNewConversation:function(){},queryOccupants:function(){},deepRemoveEmpty:function(source){var destination={};for(var property in source)_.isEmpty(source[property])||(source.hasOwnProperty(property)&&"object"==typeof source[property]?(destination[property]=source[property]||{},util.deepRemoveEmpty(source[property])):destination[property]=source[property]);return destination},deepExtend:function(destination,source){for(var property in source)source[property]&&"object"==typeof source[property]?(destination[property]=destination[property]||{},util.deepExtend(destination[property],source[property])):destination[property]=source[property];return destination},changeView:function(view){view.type?(secondary.template.main=view,secondary.voicemail.messages=[],secondary.conference.participants=[],secondary.conference.active=!1,secondary.conference.timers.cancelAll(!0),secondary[view.fn]&&secondary[view.fn].init&&secondary[view.fn].init()):(ui.root.oldTemplate.name!==view.name&&(ui.root.oldTemplate=angular.copy(ui.root.template)),ui.root.template=view)}};return{ui:ui,secondary:secondary,util:util,rosterList:rosterList,activityList:activityList,groupChat:groupChat,search:search}}])}(),function(){"use strict";uw.controller("loginController",["$rootScope","$scope","$location","$cookieStore","restService","uiService","CONFIG",function($rootScope,$scope,$location,$cookieStore,restService,uiService,CONFIG){function onCannotConnect(){$scope.$apply(function(){$scope.error="Cannot connect",$scope.info=null})}function onInvalidCredentials(){$scope.$apply(function(){$scope.error="Invalid credentials",$scope.info=null})}function onConnect(){if($scope.remember){var auth=Base64.encode($scope.username+":"+$scope.password);$cookieStore.put(authCookie,auth)}$location.path("/main")}var authCookie=CONFIG.authCookie,auth=$cookieStore.get(authCookie);if($scope.error=null,$scope.info=null,$scope.username=null,$scope.password=null,$scope.remember=!1,$location.search().unitexmppbind&&$location.search().unitexmppdomain&&$location.search().uniterestbase&&$location.search().uniteusername&&$location.search().unitepassword&&(CONFIG.httpBindUrl=$location.search().unitexmppbind,CONFIG.domain=$location.search().unitexmppdomain,CONFIG.baseRest=$location.search().uniterestbase,$scope.info="Connecting...",$scope.error=null,$scope.username=$location.search().uniteusername,$scope.password=$location.search().unitepassword),$scope.submit=function(){var user=angular.copy($scope.username),pass=angular.copy($scope.password);$scope.info="Connecting...",$scope.error=null,_.isEmpty(user)||_.isEmpty(pass)?($scope.info=null,$scope.error="Invalid credentials"):(restService.updateCredentials(angular.copy($scope.username),angular.copy($scope.password)),restService.getPhonebook().then(function(data){if($scope.remember){var auth=Base64.encode(user+":"+pass);$cookieStore.put(authCookie,auth)}restService.connected=!0,restService.phonebook=data.phonebook,restService.phonebook.forEach(function(el,i){restService.phonebook[i].name=restService.phonebook[i]["contact-information"].imDisplayName||restService.phonebook[i]["first-name"]+" "+restService.phonebook[i]["last-name"]}),uiService.util.populateContactList(),$location.path("/main")}).catch(function(er){$scope.info=null,$scope.error="Invalid credentials",console.log(er)}))},$scope.$on("services.chat.error",onCannotConnect),$scope.$on("services.chat.connfail",onCannotConnect),$scope.$on("services.chat.authfail",onInvalidCredentials),$scope.$on("services.chat.connected",onConnect),auth){var arr=Base64.decode(auth).split(":");$scope.username=arr[0],$scope.password=arr[1],$scope.info="Connecting...",$scope.error=null,$scope.remember=!0,restService.updateCredentials(angular.copy($scope.username),angular.copy($scope.password)),restService.getPhonebook().then(function(data){if($scope.remember){var auth=Base64.encode(angular.copy($scope.username)+":"+angular.copy($scope.password));$cookieStore.put(authCookie,auth)}restService.connected=!0,restService.phonebook=data.phonebook,restService.phonebook.forEach(function(el,i){restService.phonebook[i].name=restService.phonebook[i]["contact-information"].imDisplayName||restService.phonebook[i]["first-name"]+" "+restService.phonebook[i]["last-name"]}),uiService.util.populateContactList(),$location.path("/main")}).catch(function(){$scope.info=null,$scope.error="Invalid credentials"})}}])}(),function(){"use strict";uw.controller("profile",["$sce","$rootScope","$scope","restService","sharedFactory",function($sce,$rootScope,$scope,restService,sharedFactory){var templates=sharedFactory.settings.miniTemplates;restService.cred,$scope.name=restService.cred,$scope.isUserProfileVisible=!1,$scope.template=templates[0]}])}(),function(){"use strict";uw.controller("mainview",["$rootScope","$scope","uiService","sharedFactory",function($rootScope,$scope,uiService){$scope.activityList=uiService.activityList,$scope.phonebook=uiService.rosterList,$scope.root=uiService.ui.root,$scope.selectConversation=uiService.ui.activityList.selectConversation,$scope.removeConversation=uiService.ui.activityList.removeConversation,$scope.search=uiService.search,$scope.muc={showModal:uiService.ui.groupChat.showModal,hideModal:uiService.ui.groupChat.hideModal,conf:uiService.groupChat},$scope.entry={show:!1},$scope.showEntry=function(entry){$scope.muc.showModal(),$scope.entry.profile=angular.copy(entry)},$scope.hideEntry=function(){$scope.muc.hideModal(),delete $scope.entry.profile},$scope.callDialpad=function(number){$rootScope.$broadcast("controller.mainview.callDialpad",{number:number})},$scope.$on("services.chat.receivedMessage",function(){$scope.$apply()}),$scope.$on("services.chat.sentMessage",function(){}),$scope.$on("services.chat.receivedPresence",function(){$scope.$apply()}),$scope.$on("services.chat.receivedContactVCard",function(){$scope.$apply()}),$scope.$on("controller.secview.showDefault",function(){uiService.util.openChat=null}),$scope.$on("services.uiservice.changeview",function(e,obj){!obj.type})}])}(),function(){"use strict";uw.controller("secview",["$scope","uiService",function($scope,uiService){$scope.template=uiService.secondary.template,$scope.chat=uiService.secondary.chat,$scope.voicemail=uiService.secondary.voicemail,$scope.conf=uiService.secondary.conference,$scope.myprofile=uiService.secondary.profile,$scope.voicemail.folder=$scope.voicemail.folders[0],$scope.$on("services.uiservice.changeview",function(e,obj){obj.type}),$scope.$on("services.chat.receivedPresence",function(){$scope.$apply()}),$scope.$on("services.ui.queryOccupants",function(){$scope.$apply()}),$scope.$on("services.chat.receivedChatstate",function(){$scope.$apply()})}])}(),function(){"use strict";uw.controller("bottombar",["$rootScope","$scope","$timeout","restService","uiService",function($rootScope,$scope,$timeout,restService,uiService){$scope.ui=uiService.ui.root,$scope.selectedItem=uiService.ui.root.template,$scope.search=uiService.search,$scope.callNo="",$scope.showMainMenu=!1,$scope.showDial=!1,$scope.startNo=!1,$scope.phone={call:null,active:null,msg:null},$scope.keyboard=[{no:"1",text:""},{no:"2",text:"abc"},{no:"3",text:"def"},{no:"4",text:"ghi"},{no:"5",text:"jkl"},{no:"6",text:"mno"},{no:"7",text:"pqrs"},{no:"8",text:"tuv"},{no:"9",text:"wxyz"},{no:"*",text:""},{no:"0",text:""},{no:"#",text:""}],$scope.tooltip={mainMenu:{title:"Main Menu",checked:!1},dialpad:{title:"Dialpad",checked:!1}},$scope.$watchCollection("search",function(val){""===val.t?uiService.util.changeView(uiService.ui.root.oldTemplate):uiService.ui.root.template!==uiService.ui.root.templates[6]&&uiService.util.changeView(uiService.ui.root.templates[6])}),$scope.$watch("callNo",function(val){$scope.startNo=""===val?!1:!0}),$scope.broadcastViewChange=function(item){$scope.search.t="",$scope.showMainMenu=!1,$scope.selectedItem=item,$scope.phone.msg=null,uiService.util.changeView(item)},$scope.showMainMenuFn=function(){$scope.showMainMenu=!$scope.showMainMenu,$scope.showDial=!1,$scope.callNo="",$scope.phone.msg=null},$scope.showDialFn=function(){$scope.showMainMenu=!1,$scope.showDial=!$scope.showDial,$scope.phone.msg=null},$scope.clearNo=function(){$scope.callNo=""},$scope.addNo=function(no){$scope.callNo=$scope.callNo+no},$scope.phone.call=function(){var callNo=angular.copy($scope.callNo);$scope.phone.msg="Requesting call...",""!==callNo&&(restService.postBasicCall(callNo).then(function(){},function(er){$scope.phone.msg="Error",console.log(er)}).then(function(){return $scope.phone.msg="Requesting call info...",restService.getBasicCall(callNo)}).then(function(data){$scope.phone.msg=data[data.length-1].status}),$timeout(function(){restService.getBasicCall(callNo).then(function(data){$scope.phone.msg=data[data.length-1].status})},2e3))},$rootScope.$on("controller.mainview.callDialpad",function(e,obj){$scope.showDialFn(),$scope.callNo=obj.number})}])}(),function(){"use strict";uw.controller("settingsController",["$rootScope","$scope","$cookieStore","restService","CONFIG",function($rootScope,$scope,$cookieStore,restService,CONFIG){var authCookie=$cookieStore.get(CONFIG.authCookie);$scope.debug=CONFIG.debug?"off":"on",$scope.autoLogin=null!==authCookie?"off":"on",$scope.conn=CONFIG,$scope.showResetButtonConn=!1,$scope.showResetButtonDebug=!1,$scope.toggleResetButton=function(str){switch(str){case"conn":$scope.showResetButtonConn=!$scope.showResetButtonConn}},$scope.settings=[{icon:"password",name:"Login"},{icon:"chat_to_call",name:"Personal Attendant"},{icon:"follow_me",name:"Call Forwarding"},{icon:"dialpad",name:"Speed Dials"},{icon:"settings_cogs",name:"User Settings"}],$scope.selectOption=function(){switch(_.each($scope.settings,function(o){o.isSelected=!1}),this.option.isSelected=!0,$scope.selected=this.option.name,$scope.selected){case"User Settings":restService.getImBot().then(function(data){$scope.userSettings.buddy=data},function(err){console.log(err)});break;case"Speed Dials":restService.getSpeeddial().then(function(data){$scope.userSettings.speed.data=data},function(err){console.log(err)})}},$scope.toggleAutoLogin=function(){$cookieStore.remove(CONFIG.authCookie),$scope.autoLogin="off"==$scope.autoLogin?"on":"off"},$scope.reloadApp=function(){window.location.reload()},$scope.userSettings={pass:"",loading:null,buddy:null,fwd:{visible:"setup",show:function(name){$scope.userSettings.fwd.visible=name}},speed:{data:null,removeEntry:function(index){$scope.userSettings.speed.data.buttons.splice(index,1)},addEntry:function(){var obj={number:"",label:"",blf:!1};$scope.userSettings.speed.data.buttons.push(obj)},save:function(){var data=angular.copy($scope.userSettings.speed.data);$scope.userSettings.loading=!0,restService.putSpeeddial(data).then(function(){restService.getSpeeddial().then(function(data){$scope.userSettings.loading=null,$scope.userSettings.speed.data=data},function(err){$scope.userSettings.loading=null,console.log(err)})},function(err){$scope.userSettings.loading=null,console.log(err)})}},save:function(){function savePassword(){var pass=angular.copy($scope.userSettings.pass);if(0!==pass.length){if(pass.length<8)return void($scope.userSettings.errors.pass=!0);$scope.userSettings.loading=!0,restService.putPassword(pass).then(function(){$scope.userSettings.loading=null},function(err){console.log(err)})}}function saveImBot(){var buddy=angular.copy($scope.userSettings.buddy);$scope.userSettings.loading=!0,restService.putImBot(buddy).then(function(){restService.getImBot().then(function(data){$scope.userSettings.loading=null,$scope.userSettings.buddy=data},function(err){$scope.userSettings.loading=null,console.log(err)})},function(err){$scope.userSettings.loading=null,console.log(err)})}savePassword(),saveImBot()},errors:{pass:null}}}])}(),function(){"use strict";uw.directive("resize",["$window",function($window){return function(scope,element){var height,$=angular.element,w=$(window);return scope.getWindowDimensions=function(){return{h:$window.innerHeight,w:$window.innerWidth}},scope.$watch(scope.getWindowDimensions,function(newValue){function resize(){height=newValue.h-66,$(element).css("max-height",height+"px")}setTimeout(resize,0),scope.$on("$viewContentLoaded",function(){setTimeout(resize,0)})},!0),w.bind("resize",function(){scope.$apply()}),!0}}])}(),function(){"use strict";uw.directive("tree",["$compile","_",function($compile,_){return{restrict:"A",scope:{treeKey:"=",treeVal:"=",treeParent:"="},compile:function(el,attrs){var children,parent,template='<label for="{{ treeKey }}" class="col-sm-4 control-label">{{ treeKey | translate }}</label>',spanParent=template+'<div class="col-sm-8"><span data-ng-bind-html="treeVal | linky"></span></div><hr>',spanChildren=template+'<div class="form-group-child col-sm-12 clearfix"data-ng-repeat="(k, v) in treeVal track by $index"><div data-tree data-tree-key="k" data-tree-val="v"></div></div>',inputParent=template+'<div class="col-sm-8"><input type="text" class="form-control" data-ng-model="treeParent[treeKey]"></div><hr>',inputChildren=template+'<div class="form-group-child col-sm-12 clearfix"data-ng-repeat="(k, v) in treeVal track by $index"><div data-tree data-tree-key="k" data-tree-val="v" data-tree-input data-tree-parent="treeParent[treeKey]"></div></div>';return""===attrs.treeInput?(parent=inputParent,children=inputChildren):(parent=spanParent,children=spanChildren),function(scope,element){if("avatar"!==scope.treeKey&&"timestamp"!==scope.treeKey&&"imDisplayName"!==scope.treeKey)if(angular.isObject(scope.treeVal)){if(_.isEmpty(scope.treeVal))return;element.append(children),$compile(element.contents())(scope)}else element.append(parent),$compile(element.contents())(scope)}}}}])}(),function(){"use strict";uw.filter("time",["$filter",function($filter){return function(input){var day=(new Date).getUTCDate(input).toString(),mth=(new Date).getUTCMonth(input).toString(),today=(new Date).getUTCDate().toString(),todayMth=(new Date).getUTCMonth().toString();return mth===todayMth&&day===today?$filter("date")(input,"h:mm a"):$filter("date")(input,"short")}}])}(),function(){"use strict";uw.directive("duration",function(){return{restrict:"A",link:function(scope,elem,attrs){var time=attrs.duration,mins=~~(time/60),secs=time%60,ret="";ret+=mins+" min "+(10>secs?"0":""),ret+=""+secs+" s",elem.text(ret)}}})}(),function(){"use strict";uw.provider("$tooltip",function(){var defaults=this.defaults={animation:"am-fade",prefixClass:"tooltip",container:!1,placement:"top",template:"tooltip.tpl.html",contentTemplate:!1,trigger:"hover",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$timeout","dimensions","$$animateReflow",function($window,$rootScope,$compile,$q,$templateCache,$http,$animate,$timeout,dimensions,$$animateReflow){function TooltipFactory(element,config){function getPosition(){return"body"===options.container?dimensions.offset(element[0]):dimensions.position(element[0])}function getCalculatedOffset(placement,position,actualWidth,actualHeight){var offset,split=placement.split("-");switch(split[0]){case"right":offset={top:position.top+position.height/2-actualHeight/2,left:position.left+position.width};break;case"bottom":offset={top:position.top+position.height,left:position.left+position.width/2-actualWidth/2};break;case"left":offset={top:position.top+position.height/2-actualHeight/2,left:position.left-actualWidth};break;default:offset={top:position.top-actualHeight,left:position.left+position.width/2-actualWidth/2}}if(!split[1])return offset;if("top"===split[0]||"bottom"===split[0])switch(split[1]){case"left":offset.left=position.left;break;case"right":offset.left=position.left+position.width-actualWidth}else if("left"===split[0]||"right"===split[0])switch(split[1]){case"top":offset.top=position.top-actualHeight;break;case"bottom":offset.top=position.top+position.height}return offset}var $tooltip={},options=$tooltip.$options=angular.extend({},defaults,config);$tooltip.$promise=fetchTemplate(options.template);var scope=$tooltip.$scope=options.scope&&options.scope.$new()||$rootScope.$new();options.delay&&angular.isString(options.delay)&&(options.delay=parseFloat(options.delay)),options.title&&($tooltip.$scope.title=options.title),scope.$hide=function(){scope.$$postDigest(function(){$tooltip.hide()})},scope.$show=function(){scope.$$postDigest(function(){$tooltip.show()})},scope.$toggle=function(){scope.$$postDigest(function(){$tooltip.toggle()})},$tooltip.$isShown=!1;var timeout,hoverState;options.contentTemplate&&($tooltip.$promise=$tooltip.$promise.then(function(template){var templateEl=angular.element(template);return fetchTemplate(options.contentTemplate).then(function(contentTemplate){return findElement('[ng-bind="content"]',templateEl[0]).removeAttr("ng-bind").html(contentTemplate),templateEl[0].outerHTML})}));var tipLinker,tipElement,tipTemplate,tipContainer;return $tooltip.$promise.then(function(template){angular.isObject(template)&&(template=template.data),options.html&&(template=template.replace(htmlReplaceRegExp,'ng-bind-html="')),template=trim.apply(template),tipTemplate=template,tipLinker=$compile(template),$tooltip.init()}),$tooltip.init=function(){options.delay&&angular.isNumber(options.delay)&&(options.delay={show:options.delay,hide:options.delay}),"self"===options.container?tipContainer=element:options.container&&(tipContainer=findElement(options.container));var triggers=options.trigger.split(" ");angular.forEach(triggers,function(trigger){"click"===trigger?element.on("click",$tooltip.toggle):"manual"!==trigger&&(element.on("hover"===trigger?"mouseenter":"focus",$tooltip.enter),element.on("hover"===trigger?"mouseleave":"blur",$tooltip.leave))}),options.show&&scope.$$postDigest(function(){"focus"===options.trigger?element[0].focus():$tooltip.show()})},$tooltip.destroy=function(){for(var triggers=options.trigger.split(" "),i=triggers.length;i--;){var trigger=triggers[i];"click"===trigger?element.off("click",$tooltip.toggle):"manual"!==trigger&&(element.off("hover"===trigger?"mouseenter":"focus",$tooltip.enter),element.off("hover"===trigger?"mouseleave":"blur",$tooltip.leave))
}tipElement&&(tipElement.remove(),tipElement=null),scope.$destroy()},$tooltip.enter=function(){return clearTimeout(timeout),hoverState="in",options.delay&&options.delay.show?void(timeout=setTimeout(function(){"in"===hoverState&&$tooltip.show()},options.delay.show)):$tooltip.show()},$tooltip.show=function(){var parent=options.container?tipContainer:null,after=options.container?null:element;tipElement&&tipElement.remove(),tipElement=$tooltip.$element=tipLinker(scope,function(){}),tipElement.css({top:"0px",left:"0px",display:"block"}).addClass(options.placement),options.animation&&tipElement.addClass(options.animation),options.type&&tipElement.addClass(options.prefixClass+"-"+options.type),$animate.enter(tipElement,parent,after,function(){}),$tooltip.$isShown=!0,scope.$$phase||scope.$digest(),$$animateReflow($tooltip.$applyPlacement),options.keyboard&&("focus"!==options.trigger?($tooltip.focus(),tipElement.on("keyup",$tooltip.$onKeyUp)):element.on("keyup",$tooltip.$onFocusKeyUp))},$tooltip.leave=function(){return clearTimeout(timeout),hoverState="out",options.delay&&options.delay.hide?void(timeout=setTimeout(function(){"out"===hoverState&&$tooltip.hide()},options.delay.hide)):$tooltip.hide()},$tooltip.hide=function(blur){return $tooltip.$isShown?($animate.leave(tipElement,function(){tipElement=null}),scope.$$phase||scope.$digest(),$tooltip.$isShown=!1,options.keyboard&&tipElement.off("keyup",$tooltip.$onKeyUp),blur&&"focus"===options.trigger?element[0].blur():void 0):void 0},$tooltip.toggle=function(){$tooltip.$isShown?$tooltip.leave():$tooltip.enter()},$tooltip.focus=function(){tipElement[0].focus()},$tooltip.$applyPlacement=function(){if(tipElement){var elementPosition=getPosition(),tipWidth=tipElement.prop("offsetWidth"),tipHeight=tipElement.prop("offsetHeight"),tipPosition=getCalculatedOffset(options.placement,elementPosition,tipWidth,tipHeight);tipPosition.top+="px",tipPosition.left+="px",tipElement.css(tipPosition)}},$tooltip.$onKeyUp=function(evt){27===evt.which&&$tooltip.hide()},$tooltip.$onFocusKeyUp=function(evt){27===evt.which&&element[0].blur()},$tooltip}function findElement(query,element){return angular.element((element||document).querySelectorAll(query))}function fetchTemplate(template){return $q.when($templateCache.get(template)||$http.get(template)).then(function(res){return angular.isObject(res)?($templateCache.put(template,res.data),res.data):res})}var trim=String.prototype.trim,htmlReplaceRegExp=("createTouch"in $window.document,/ng-bind="/gi);return TooltipFactory}]}).directive("bsTooltip",["$window","$location","$sce","$tooltip","$$animateReflow",function($window,$location,$sce,$tooltip,$$animateReflow){return{restrict:"EAC",scope:!0,link:function(scope,element,attr){var options={scope:scope};angular.forEach(["template","contentTemplate","placement","container","delay","trigger","keyboard","html","animation","type"],function(key){angular.isDefined(attr[key])&&(options[key]=attr[key])}),angular.forEach(["title"],function(key){attr[key]&&attr.$observe(key,function(newValue,oldValue){scope[key]=$sce.getTrustedHtml(newValue),angular.isDefined(oldValue)&&$$animateReflow(function(){tooltip&&tooltip.$applyPlacement()})})}),attr.bsTooltip&&scope.$watch(attr.bsTooltip,function(newValue,oldValue){angular.isObject(newValue)?angular.extend(scope,newValue):scope.content=newValue,angular.isDefined(oldValue)&&$$animateReflow(function(){tooltip&&tooltip.$applyPlacement()})},!0);var tooltip=$tooltip(element,options);scope.$on("$destroy",function(){tooltip.destroy(),options=null,tooltip=null})}}}])}(),function(){"use strict";uw.directive("maxHeight",["uiService",function(uiService){return{compile:function(){return function(scope,elem){scope.$watch(function(){return uiService.groupChat.modal},function(newValue){newValue?(elem[0].scrollTop=0,angular.element(elem).css({height:"100%",overflow:"hidden"})):angular.element(elem).css({height:"auto",overflow:"auto"})})}}}}])}(),function(){"use strict";uw.filter("translate",function(){return function(input){var translated=input,dict=[{vcard:"ADR",human:"Address"},{vcard:"CTRY",human:"Country"},{vcard:"EXTADD",human:"Ext-Address"},{vcard:"HOME",human:"Home"},{vcard:"LOCALITY",human:"Locality"},{vcard:"PCODE",human:"Postal-Code"},{vcard:"REGION",human:"Region"},{vcard:"STREET",human:"Street"},{vcard:"BDAY",human:"Birthday"},{vcard:"DESC",human:"Description"},{vcard:"EMAIL",human:"Email"},{vcard:"INTERNET",human:"Internet"},{vcard:"PREF",human:"Pref"},{vcard:"USERID",human:"User"},{vcard:"FN",human:"Full-Name"},{vcard:"JABBERID",human:"JabberID"},{vcard:"N",human:"Names"},{vcard:"FAMILY",human:"Family"},{vcard:"GIVEN",human:"Given"},{vcard:"MIDDLE",human:"Middle"},{vcard:"NICKNAME",human:"Nickname"},{vcard:"ORG",human:"Organization"},{vcard:"ORGNAME",human:"Org-Name"},{vcard:"ORGUNIT",human:"Org-Unit"},{vcard:"PHOTO",human:"Photo"},{vcard:"BINVAL",human:"Binary-Value"},{vcard:"TYPE",human:"Type"},{vcard:"ROLE",human:"Role"},{vcard:"TEL",human:"Telephone"},{vcard:"HOME",human:"Home-Phone"},{vcard:"MSG",human:"Messaging"},{vcard:"NUMBER",human:"Number"},{vcard:"TITLE",human:"Title"},{vcard:"URL",human:"Url"},{vcard:"X-ALT-EMAIL",human:"Alt-Email"},{vcard:"X-ALT-JABBERID",human:"Alt-JabberID"},{vcard:"X-ASSISTANT",human:"Assistant"},{vcard:"X-ASSISTANT-PHONE",human:"Assistant-Phone"},{vcard:"X-DID",human:"DID"},{vcard:"X-FACEBOOK",human:"Facebook-URL"},{vcard:"X-INTERN",human:"Int-Number"},{vcard:"X-LINKEDIN",human:"LinkedIn-URL"},{vcard:"X-LOCATION",human:"Location"},{vcard:"X-MANAGER",human:"Manager"},{vcard:"X-SALUTATION",human:"Salutation"},{vcard:"X-TWITTER",human:"Twitter-URL"},{vcard:"X-XING",human:"Xing-URL"},{vcard:"assistantPhoneNumber",human:"Assistant Phone No."},{vcard:"faxNumber",human:"Fax Number"},{vcard:"avatar",human:"Avatar"},{vcard:"emailAddress",human:"Email Address"},{vcard:"homeAddress",human:"Home Address"},{vcard:"imDisplayName",human:"IM Display Name"},{vcard:"imId",human:"IM ID"},{vcard:"officeAddress",human:"Office Address"},{vcard:"city",human:"City"},{vcard:"country",human:"Country"},{vcard:"officeDesignation",human:"Office"},{vcard:"state",human:"State"},{vcard:"street",human:"Street"},{vcard:"zip",human:"ZIP"},{vcard:"alternateEmailAddress",human:"Alt. Email Addr."},{vcard:"alternateImId",human:"Alt. IM ID"},{vcard:"jobDept",human:"Dept."},{vcard:"jobTitle",human:"Title"},{vcard:"location",human:"Location"},{vcard:"homePhoneNumber",human:"Home Phone"},{vcard:"cellPhoneNumber",human:"Cell Phone"},{vcard:"companyName",human:"Company"},{vcard:"assistantName",human:"Assistant Name"},{vcard:"lastName",human:"Last Name"},{vcard:"useBranchAddress",human:"Use Branch Address"},{vcard:"contact-information",human:"Contact Information"},{vcard:"branchName",human:"Branch Name"},{vcard:"enabled",human:"Enabled"},{vcard:"firstName",human:"First Name"},{vcard:"ldapManaged",human:"LDAP Managed"},{vcard:"salutation",human:"Salutation"},{vcard:"timestamp",human:"Timestamp"},{vcard:"didNumber",human:"DID"},{vcard:"facebookName",human:"FB Name"},{vcard:"linkedinName",human:"LinkedIn Name"},{vcard:"twiterName",human:"Twitter Name"},{vcard:"xingName",human:"XING Name"},{vcard:"confEnter",human:"Conference enter"},{vcard:"confExit",human:"Conference exit"},{vcard:"vmBegin",human:"Voicemail begin"},{vcard:"vmEnd",human:"Voicemail end"}];return _.find(dict,function(obj){return translated===obj.vcard||translated===obj.human?(translated=translated===obj.vcard?obj.human:obj.vcard,!0):void 0}),translated}})}(),function(){uw.run(["$templateCache",function($templateCache){"use strict";$templateCache.put("views/activitylist.html",'<div class="entry-wrapper animated fade" data-ng-repeat="entry in (filtered = (activityList.main | orderBy: \'-timestamp\' )) track by $index"><div data-ng-click="selectConversation(entry)" class="entry-container clearfix"><div class="entry-photo pull-left"><img data-ng-show="!entry.type" data-vcard-photo="activityList.main"> <i data-ng-show="entry.type" class="icon-group-chat big-grey"></i> <span data-ng-show="!entry.type" class="entry-status {{ entry.show || \'offline\' }}"></span></div><div class="entry-name pull-left"><span class="entry-name-big">{{ entry.name }} <span class="label label-default animated fade" data-ng-if="entry.type && !entry.connected">Click to connect</span></span> <span class="entry-msg">{{ entry.last_message }}</span></div><div class="entry-misc pull-left"><span data-ng-show="(entry.unread !== 0)" class="entry-unread">{{ entry.unread }}</span> <span data-ng-show="(entry.unread === 0)">{{ entry.timestamp | time }}</span></div></div><span class="entry-remove" data-ng-click="removeConversation(entry)"><i class="icon-close"></i></span></div>'),$templateCache.put("views/chat.html",'<div class="sticky-wrapper"><div class="row profile-bar-chat"><div class="col-sm-10 col-md-11"><span class="pull-left profile-status {{ chat.info.show || \'offline\' }}"></span> <span>{{ chat.info.name }}</span></div><div class="col-sm-2 col-md-1"><button class="btn btn-link pull-right" data-ng-click="chat.showDefault()"><i class="icon-close"></i></button></div></div><div class="row message-list"><div class="message-list" data-ng-class="{\'col-xs-10\': chat.info.groupChat, \'col-xs-12\': !chat.info.groupChat}" data-scroll-glue="" data-resize=""><div data-ng-repeat="message in chat.messages" data-ng-class="{ \'last\': $last }" class="col-md-12 message {{ message.type }}"><div class="row"><div class="col-md-12 name">{{ message.fromNormal }}</div></div><div class="line row" data-ng-repeat="item in message.grouped"><div class="content col-xs-9"><span data-ng-bind-html=" item.text | linky:\'_blank\' "></span></div><div class="time col-xs-3 text-right">{{ item.timestamp | time }}</div></div></div><div class="col-md-12" data-ng-if="chat.info.chatstateIcon !== \'\'"><span class="message-list-chatstate"><i class="{{ chat.info.chatstateIcon }}"></i></span></div></div><div data-ng-if="chat.info.groupChat" class="col-xs-2 part-list" data-resize=""><div data-ng-repeat="entry in chat.info.chatPart[chat.info.jid]">{{ entry.nick }}</div></div></div></div><div class="sticky"><div class="row bottom-bar"><div class="input-group pull-left"><input type="text" data-ng-model="chat.info.outMsg" data-ng-keypress="chat.keyPress($event)" class="form-control" placeholder="Text..."></div></div></div>'),$templateCache.put("views/conference-bridge.html",'<div class="row profile-bar-chat"><div class="col-sm-10 col-md-11"><span>CONFERENCE BRIDGE</span></div><div class="col-sm-2 col-md-1"><button class="btn btn-link pull-right" data-ng-click="chat.showDefault()"><i class="icon-close"></i></button></div></div><div class="sticky-wrapper"><div class="row conf"><div class="col-md-12"><div class="row"><div class="col-md-12 conf-options-bar"><p>Use this conference room:</p><div class="spinner-wrapper animated fade" data-ng-show="!conf.rooms"><div class="spinner small"></div></div><select class="animated fade" data-ng-show="conf.rooms" data-ng-model="conf.select" data-ng-change="conf.changeRoom()" data-ng-options="opt.name for opt in conf.rooms track by $index"></select><button type="button" data-ng-if="conf.refresh" data-ng-click="conf.timers.start(\'confActive\')" class="btn btn-default pull-right animated fade"><i class="icon-refresh"></i></button><p class="pull-right status">{{ conf.status }}</p></div></div><div class="row animated fade"><div data-drop="conf.moveHere" class="conf-move clearfix"><div data-ng-repeat="entry in conf.participants track by $index" data-ng-class="{\'inactive\': !entry.conf.active, \'active\': entry.conf.active}" class="col-xs-3 col-md-2 clearfix part animated ease fade"><img data-ng-src="{{ entry.avatar }}">  <span class="entry-name-big">{{ entry.name }}</span> <span class="entry-remove" data-ng-if="!entry.conf.active" data-ng-click="conf.remove($index)"><i class="icon-close"></i></span><div class="conf-info" data-ng-if="entry.conf.active && (!entry.conf[\'can_speak\'] || !entry.conf[\'can_hear\'])"><i class="icon-volume_mic_mute" data-ng-if="!entry.conf[\'can_speak\']"></i> <i class="icon-volume_speaker_1_mute" data-ng-if="!entry.conf[\'can_hear\']"></i></div><div class="conf-control" data-ng-if="conf.active"><button type="button" data-ng-click="conf.kick(entry)"><i class="icon-presence_on_the_phone"></i></button> <button type="button" data-ng-click="conf.mute(entry)"><i class="icon-volume_mic_mute"></i></button> <button type="button" data-ng-click="conf.deaf(entry)"><i class="icon-volume_speaker_1_mute"></i></button></div></div><div class="col-xs-3 col-md-2 clearfix conf-move-space"></div></div></div><hr><div class="row animated fade"><div class="col-xs-4 col-xs-offset-4" data-ng-if="conf.rooms"><button type="button" data-ng-disabled="(conf.participants.length === 0) || (conf.btnDisabled)" class="btn btn-default btn-lg btn-block" data-ng-click="conf.call()"><i class="icon-presence_on_the_phone" data-ng-class="{\'active\': conf.active, \'inactive\': !conf.active}"></i></button></div></div></div></div></div><div class="sticky"></div>'),$templateCache.put("views/default-right.html",'<div class="default-right"><p>Start or continue a chat with a contact by clicking on a name.</p></div>'),$templateCache.put("views/groupchats.html",'<h5 class="main-left-title">GROUP CHATS</h5><div class="entry-wrapper animated fade" data-ng-repeat="entry in (filtered = (activityList.main | orderBy: \'-timestamp\' | filter: {type: \'groupchat\'})) track by $index" data-ng-class="{ \'last\': $last }"><div data-ng-click="selectConversation(entry)" class="entry-container clearfix"><div class="entry-photo pull-left"><img data-ng-show="!entry.type" data-vcard-photo="activityList.main"> <i data-ng-show="entry.type" class="icon-group-chat big-grey"></i> <span data-ng-show="!entry.type" class="entry-status {{ entry.show || \'offline\' }}"></span></div><div class="entry-name pull-left"><span class="entry-name-big">{{ entry.name }} <span class="label label-default animated fade" data-ng-if="entry.type && !entry.connected">Click to connect</span></span> <span class="entry-msg">{{ entry.last_message }}</span></div><div class="entry-misc pull-left"><span data-ng-show="(entry.unread !== 0)" class="entry-unread">{{ entry.unread }}</span> <span data-ng-show="(entry.unread === 0)">{{ entry.timestamp | time }}</span></div></div><span class="entry-remove" data-ng-click="removeConversation(entry)"><i class="icon-close"></i></span></div><div class="group-chat-button"><button type="button" data-ng-click="muc.showModal()" class="btn btn-default btn-lg btn-block">Find / Add group</button></div><div data-ng-show="muc.conf.modal" class="rooms-modal clearfix animated fade"><div class="clearfix"><h5 class="main-left-title pull-left">FIND / ADD GROUP</h5><div data-ng-click="muc.hideModal()" class="pull-right close-button"><i class="icon-close"></i></div></div><form name="mucForm" role="form"><div class="animated fade"><input data-ng-model="muc.conf.muc.room" name="room" type="text" class="form-control" placeholder="Room name"><input data-ng-model="muc.conf.muc.server" name="server" type="text" class="form-control" placeholder="Server"><input data-ng-model="muc.conf.muc.handle" name="handle" type="text" class="form-control" placeholder="Handle"><input data-ng-model="muc.conf.muc.pass" name="pass" type="text" class="form-control" placeholder="Password"></div><div class="clearfix"><button data-ng-click="muc.getRooms(muc.conf.muc.server)" type="button" class="btn btn-default first">Room list</button> <button data-ng-disabled="muc.conf.muc.room === \'\'" data-ng-class="{\'disabled\': muc.conf.muc.room === \'\'}" data-ng-click="muc.joinRoom(muc.conf.muc.room)" type="button" class="btn btn-default">Join</button></div></form><div class="alert alert-warning alert-dismissable animated fade" data-ng-if="muc.conf.muc.err"><button type="button" class="close" aria-hidden="true" data-ng-click="muc.conf.muc.err = null"><i class="icon-close"></i></button><h5>{{muc.conf.muc.err.msg}}</h5><p><small class="text-muted">{{muc.conf.muc.err.failed}}</small></p></div><hr data-ng-show="muc.conf.serverRooms !== null" class="animated fade"><span data-ng-show="muc.conf.serverRooms !== null && muc.conf.serverRooms.length === 0" class="animated fade">Sorry, no groups have been found.</span><div class="server-groups clearfix"><div data-ng-show="muc.conf.serverRooms" data-ng-repeat="entry in (filtered = (muc.conf.serverRooms | orderBy: \'name\')) track by $index" class="server-group animated fade"><div class="entry-name" data-ng-click="muc.joinRoom(entry.name)"><span class="entry-name-big">{{ entry.name }}</span> <i class="icon-group-chat"></i> </div></div></div></div>'),$templateCache.put("views/login.html",'<div id="webchat-login" class="row" data-ng-controller="loginController"><div class="col-xs-4 col-xs-offset-4 well"><legend>Sign in to Unite Web</legend><div class="alert alert-warning animated fade" data-ng-show="error"><button type="button" class="close" data-dismiss="alert" aria-hidden="true" data-ng-click="error = \'\'">&times;</button> <span>{{ error }}<span></span></span></div><div class="alert alert-info animated fade" data-ng-show="info"><span>{{ info }}<span></span></span></div><form method="POST" action="" accept-charset="UTF-8" data-ng-submit="submit()"><div class="form-group"><input type="text" class="form-control" name="username" placeholder="Username" data-ng-model="username"></div><div class="form-group"><input type="password" class="form-control" name="password" placeholder="Password" data-ng-model="password"></div><div class="checkbox"><label><input type="checkbox" name="remember" data-ng-model="remember">Remember Me</label></div><button type="submit" name="submit" class="btn btn-info btn-block">Sign in</button></form></div></div>'),$templateCache.put("views/main.html",'<div id="webchat-main" class="row"><div class="col-sm-4 col-md-3 left-side-view"><div class="sticky-wrapper"><div data-ng-controller="profile" class="profile-wrapper"><div class="profile"><div class="row"><div data-ng-click="isUserProfileVisible = !isUserProfileVisible" class="col-sm-12 profile-bar unselectable"><p>{{ name.user }}</p></div></div></div></div><div class="row" data-max-height=""><div data-ng-controller="mainview" data-ng-include="root.template.url" data-max-height="" data-resize="" class="col-sm-12 mainview"></div></div></div><div class="sticky"><div class="row"><div data-ng-controller="bottombar" class="col-sm-12 bottom-bar clearfix"><div data-ng-show="showMainMenu" class="main-menu animated fadeUp"><div data-ng-repeat="item in (filtered = (ui.templates | filter: { show: true } )) track by $index"><button data-ng-click="broadcastViewChange(item)" data-ng-class="{\'active\': item.name === ui.template.name, \'last\': $last}" class="btn btn-link btn-lg btn-block"><i data-ng-class="item.iconClass"></i> <span>{{item.name}}</span></button></div></div><div data-ng-show="showDial" class="main-menu animated fadeUp"><div class="well"><div class="alert alert-warning animated fade" data-ng-show="phone.msg"><button type="button" class="close" aria-hidden="true" data-ng-click="phone.msg = \'\'">&times;</button> <span>{{ phone.msg }}<span></span></span></div><div class="input-group"><input type="tel" data-ng-model="callNo" class="form-control" placeholder="Enter a number"><span class="input-group-btn" data-ng-show="startNo"><button class="btn btn-default clear" type="button" data-ng-click="clearNo()"><i class="glyphicon glyphicon-remove-circle"></i></button></span></div><div class="keyboard clearfix"><div class="kb-number pull-left col-xs-4" data-ng-repeat="item in keyboard track by $index"><button class="btn btn-default" type="button" data-ng-click="addNo(item.no)"><span class="kb-number-no">{{ item.no }}</span> <span class="kb-number-letters">{{ item.text }}</span></button></div></div><button type="button" data-ng-disabled="callNo === \'\'" class="btn btn-default btn-lg btn-block" data-ng-click="phone.call()"><i class="icon-presence_on_the_phone" data-ng-class="{\'active\': callNo !== \'\', \'inactive\': callNo === \'\'}"></i></button></div></div><div class="bottom-bar-wrapper clearfix"><div class="input-group pull-left"><span class="input-group-btn"><button class="btn btn-default" type="button"><i class="icon-search"></i></button></span><input type="text" data-ng-model="search.t" class="form-control" placeholder="Search"><span class="input-group-btn" data-ng-show="search.t.length > 0"><button class="btn btn-default clear" type="button" data-ng-click="search.t = \'\'"><i class="icon-close2"></i></button></span></div><div class="main-btn-wrapper pull-right"><button data-bs-tooltip="tooltip.mainMenu" data-animation="" data-ng-click="showMainMenuFn()" data-ng-class="{\'active\': showMainMenu}" class="btn btn-default animated"><i class="icon-hamburger"></i></button></div><div class="main-btn-wrapper pull-right"><button data-bs-tooltip="tooltip.dialpad" data-animation="" data-ng-click="showDialFn()" data-ng-class="{\'active\': showDial}" class="btn btn-default pull-right"><i class="icon-dialpad"></i></button></div></div></div></div></div></div><div class="col-sm-8 col-md-9 right-side-view"><div class="row full-height"><div data-ng-controller="secview" data-ng-include="template.main.url" data-autoscroll="" class="col-sm-12 secview fade"></div></div></div></div><div class="spinner-wrapper-big animated fade" data-ng-if="!received"><div class="spinner"></div></div>'),$templateCache.put("views/my-profile.html",'<div class="sticky-wrapper"><div class="row profile-bar-chat"><div class="col-sm-10 col-md-11"><span>MY PROFILE</span></div><div class="col-sm-2 col-md-1"><button class="btn btn-link pull-right" data-ng-click="chat.showDefault()"><i class="icon-close"></i></button></div></div><div data-resize="" class="row my-profile"><div class="row"><div class="col-xs-6"><div class="entry clearfix"><div class="entry-photo pull-left"><img data-ng-src="{{ myprofile.info.photoSrc }}"></div><div class="pull-left"><div class="entry-name">{{ myprofile.info.name }}</div><div class="entry-loc">{{ myprofile.info.location }}</div></div></div></div></div><form class="form-horizontal col-sm-12" role="form" name="profileForm" data-ng-if="myprofile.info.profile"><div class="row"><div class="col-xs-6"><div class="form-groups clearfix"><div class="form-group clearfix" data-ng-repeat="(key, val) in myprofile.info.profile" data-ng-if="$even" data-ng-class="{ even: $even, odd: $odd }"><div data-tree="" data-tree-key="key" data-tree-val="val" data-tree-input="" data-tree-parent="myprofile.info.profile"></div></div></div></div><div class="col-xs-6"><div class="form-groups clearfix"><div class="form-group clearfix" data-ng-repeat="(key, val) in myprofile.info.profile" data-ng-if="$odd" data-ng-class="{ even: $even, odd: $odd }"><div data-tree="" data-tree-key="key" data-tree-val="val" data-tree-input="" data-tree-parent="myprofile.info.profile"></div></div></div></div></div><button class="btn btn-default">Cancel</button> <button class="btn btn-info" data-ng-click="myprofile.save()">Save</button></form><div class="spinner-wrapper animated fade" data-ng-show="!myprofile.info.profile"><div class="spinner small"></div></div></div></div><div class="sticky"><div class="row bottom-bar"><div class="input-group pull-left"></div></div></div>'),$templateCache.put("views/profile.html",'<div class="row"><div class="col-md-12"><div class="entry clearfix"><div class="entry-photo pull-left"><img data-ng-src="{{ (photoSrc) ? (photoSrc) : (\'styles/images/white_no_pic_provided.png\') }}"> <span class="entry-status {{ status }}"></span></div><div class="entry-details pull-left"><div class="entry-status"><i class="icon-settings"></i> <span>{{ show }}</span></div><div class="entry-location"><i class="icon-location2"></i> <span>{{ location }}</span></div></div></div><hr><div class="presence"><p>PRESENCE</p><div data-ng-repeat="p in presences" data-ng-class="{ \'active\': p.show === show }" data-ng-click="setPresence({icon: p.icon, show: p.show, status: p.status})" class="clearfix"><i style="color: {{p.color}}" class="{{ p.icon }} pull-left"></i> <span class="pull-left">{{ p.show }}</span></div></div><hr><div class="location"><p>LOCATION</p><div data-ng-repeat="l in locations" data-ng-class="{ \'active\': l.text === location }" data-ng-click="setLocation()" class="clearfix"><i class="icon-location2 pull-left"></i> <span class="pull-left">{{ l.text }}</span></div></div></div></div>'),$templateCache.put("views/rosterlist.html",'<h5 class="main-left-title">MY CONTACTS</h5><div><div data-ng-repeat="entry in (filtered = (phonebook.main | orderBy:\'name\' )) track by $index"><div data-drag="" data-ng-model="entry" data-ng-click="showEntry(entry)" class="entry-container clearfix"><div class="entry-photo pull-left"><img data-ng-src="{{ entry.avatar }}"></div><div class="entry-name pull-left"><span class="entry-name-big">{{ entry.name }}</span> <span class="entry-loc">{{ entry[\'contact-information\'].location || \'-\' }}</span></div></div></div></div><div class="rooms-modal roster-modal animated fade" data-ng-show="muc.conf.modal"><div class="clearfix"><h5 class="main-left-title pull-left">MY CONTACTS / PROFILE</h5><div data-ng-click="hideEntry()" class="pull-right close-button"><i class="icon-close"></i></div></div><div class="roster-modal-mini-profile clearfix"><div class="entry-photo pull-left"><img data-ng-src="{{ entry.profile.avatar }}"></div><div class="entry-name pull-left"><span class="entry-name-big">{{ entry.profile.name }}</span> <span class="entry-loc">{{ entry.profile[\'contact-information\'].location || \'-\' }}</span></div></div><div><button type="button" class="btn btn-default btn-xs btn-block" data-ng-click="callDialpad(entry.profile.number)"><i class="icon-presence_on_the_phone"></i></button></div><div class="roster-modal-vcard"><div class="form-group clearfix" data-ng-repeat="(key, val) in entry.profile[\'contact-information\'] track by $index"><div data-tree="" data-tree-key="key" data-tree-val="val"></div></div></div></div>'),$templateCache.put("views/search.html",'<div><div data-ng-repeat="entry in (filtered = (phonebook.main | orderBy:\'name\' | filter:{ \'name\': search.t } )) track by $index"><div data-drag="" data-ng-model="entry" class="entry-container clearfix"><div class="entry-photo pull-left"><img data-ng-src="{{ entry.avatar }}"></div><div class="entry-name pull-left"><span class="entry-name-big">{{ entry.name }}</span> <span class="entry-loc">{{ entry[\'contact-information\'].location || \'-\' }}</span></div></div></div></div>'),$templateCache.put("views/settings.html",'<div data-ng-controller="settingsController"><div id="settings-wideview"><div class="settings profile-bar-chat row"><div class="col-sm-10 col-md-11"><span class="settings-title">Settings</span></div><div class="col-sm-2 col-md-1"><button class="btn btn-link pull-right" data-ng-click="chat.showDefault()"><i class="icon-close"></i></button></div></div><div id="settings-list" class="row"><div class="col-sm-5 col-md-4"><div id="settings-menu" class="row"><div class="settings-item row-fluid" data-ng-repeat="option in settings" data-ng-click="selectOption()"><p class="clearfix" data-ng-class="{\'activ\': option.isSelected}"><span class="col-xs-2"><i class="icon-{{option.icon}}"></i></span> <span class="col-xs-7">{{option.name}}</span> <span class="col-xs-3 arrow"><i class="icon-arrow_collapse_right"></i></span></p></div></div></div><div class="col-sm-7 col-md-8 setting-right-side" data-ng-if="selected === \'Login\'"><div class="row"><div class="settings-details span10 offset1"><p class="settings-title">Login Settings</p><div class="settings-details-wrapper"><button class="btn btn-default" data-ng-click="toggleAutoLogin()" data-ng-disabled="autoLogin === \'on\'" data-ng-class="{\'disabled\': autoLogin === \'on\'}">Turn auto-loggin {{autoLogin}}</button> <button data-ng-click="reloadApp()" class="btn btn-default">Logout and reload app</button></div></div><div class="col-md-1"></div></div></div><div class="col-sm-7 col-md-8 setting-right-side" data-ng-if="selected === \'Personal Attendant\'"><div class="row"><div class="settings-details"><p class="settings-title">Personal Attendant</p><div class="settings-details-wrapper"><p>Auto Attendant Language:<select><option>English</option><option>French</option></select></p><p>Timeout (sec)<input class="form-control input-sm" type="text"></p><p>Retry count<input class="form-control input-sm" type="text"></p><p>On timeout or retry exceeded call rolls to voicemail</p><button class="btn btn-default">Cancel</button> <button class="btn btn-info">Save</button></div></div></div></div><div class="col-sm-7 col-md-8 setting-right-side" data-ng-if="selected === \'Call Forwarding\'"><div class="row"><div class="settings-details"><p class="settings-title">Call Forwarding</p><ul class="nav nav-pills nav-justified"><li data-ng-class="{\'active\': userSettings.fwd.visible === \'setup\'}"><button type="button" class="btn btn-default btn-block" data-ng-click="userSettings.fwd.show(\'setup\')">Set-up</button></li><li data-ng-class="{\'active\': userSettings.fwd.visible === \'schedule\'}"><button type="button" class="btn btn-default btn-block" data-ng-click="userSettings.fwd.show(\'schedule\')">Schedules</button></li></ul><div class="settings-details-wrapper"><div data-ng-if="userSettings.fwd.visible === \'setup\'">Extension 2015 will ring first for (sec)<input type="number"></div><div data-ng-if="userSettings.fwd.visible === \'schedule\'"></div></div><div class="settings-details-wrapper"><button class="btn btn-default">Cancel</button> <button class="btn btn-info">Save</button></div></div></div></div><div class="col-sm-7 col-md-8 setting-right-side" data-ng-if="selected === \'Speed Dials\'"><div class="row"><div class="settings-details speed"><p class="settings-title">Speed Dials</p><div class="settings-details-wrapper"><p><input type="checkbox" data-ng-model="userSettings.speed.data.groupSpeedDial">Only use Group Speed Dials</p></div><form class="form-inline" role="form"><div class="form-group" data-ng-repeat="obj in userSettings.speed.data.buttons track by $index"><input type="text" class="form-control" placeholder="Number" data-ng-model="userSettings.speed.data.buttons[$index].number"><input type="text" class="form-control" placeholder="Name" data-ng-model="userSettings.speed.data.buttons[$index].label"><input type="checkbox" class="form-control" data-ng-model="userSettings.speed.data.buttons[$index].blf"><button type="button" class="btn btn-default" data-ng-click="userSettings.speed.removeEntry($index)"><i class="icon-close"></i></button></div></form><button type="button" class="btn btn-default" data-ng-click="userSettings.speed.addEntry()"><b>+</b></button><div class="settings-details-wrapper"><button class="btn btn-default">Cancel</button> <button class="btn btn-info" data-ng-click="userSettings.speed.save()">Save</button><div class="spinner-wrapper inline animated fade" data-ng-show="userSettings.loading"><div class="spinner small"></div></div></div></div></div></div><div class="col-sm-7 col-md-8 setting-right-side" data-ng-if="selected === \'User Settings\'"><div class="row"><div class="settings-details"><p class="settings-title">User Settings</p><div class="settings-details-wrapper"><div class="form-group clearfix"><label for="inputPass" class="col-sm-3 control-label">User Password</label><div class="col-sm-9"><input type="password" class="form-control" id="inputPass" placeholder="Password" pattern=".{8,}" data-ng-model="userSettings.pass"><p class="text-muted pull-right">Used to log in into the user portal or XMPP.</p></div></div><div class="alert alert-warning alert-dismissable animated fade" data-ng-if="userSettings.errors.pass"><button type="button" class="close" data-ng-click="userSettings.errors.pass = null">&times;</button> Minimum password length: 8</div></div><p class="settings-subtitle">My Buddy / IM Bot</p><div class="settings-details-wrapper"><div class="spinner-wrapper animated fade" data-ng-if="!userSettings.buddy"><div class="spinner small"></div></div><div data-ng-if="userSettings.buddy"><div class="form-group clearfix animated fade"><label class="col-sm-4 control-label"><p class="muted">Triggered on:</p></label></div><div class="form-group clearfix animated fade" data-ng-repeat="(key, val) in userSettings.buddy track by $index"><label class="col-sm-4 control-label">{{ key | translate }}</label><div class="col-sm-8"><input type="checkbox" class="form-control" placeholder="Password" data-ng-model="userSettings.buddy[key]"></div></div></div></div><div class="settings-details-wrapper"><button class="btn btn-default">Cancel</button> <button class="btn btn-info" data-ng-click="userSettings.save()">Save</button><div class="spinner-wrapper inline animated fade" data-ng-show="userSettings.loading"><div class="spinner small"></div></div></div></div></div></div></div></div></div>'),$templateCache.put("views/voicemails.html",'<div class="sticky-wrapper"><div class="row profile-bar-chat"><div class="col-sm-10 col-md-11"><span>VOICEMAILS</span></div><div class="col-sm-2 col-md-1"><button class="btn btn-link pull-right" data-ng-click="chat.showDefault()"><i class="icon-close"></i></button></div></div><div class="row"><div class="col-md-12 conf-options-bar"><p>Current folder:</p><select class="animated fade" data-ng-model="voicemail.folder" data-ng-change="voicemail.changeFolder()" data-ng-options="opt.name for opt in voicemail.folders"></select></div></div><div class="voicemail row" data-resize=""><div class="voicemail-wrapper row" data-ng-repeat="audio in (filtered = (voicemail.messages)) track by $index"><div class="vmsg col-md-12"><div class="col-sm-3 vmsg-name"><span class="name">{{ audio.author }} <span class="label label-primary" data-ng-if="audio.heard === false">New</span></span> <span data-duration="{{ audio.duration }}" class="time">{{ audio.duration }}</span></div><div class="col-sm-9 vmsg-msg"><div class="spinner-wrapper inline animated fade" data-ng-show="audio.loading"><div class="spinner small"></div></div><audio controls="" data-ng-click="voicemail.getMessage(audio.id, $index)" data-ng-src="{{ audio.href }}"></audio><div class="pull-right"><div class="btn-group btn-group-xs"><a target="_self" data-ng-if="audio.href" data-ng-href="{{ audio.href }}" download="voicemail.mp3" class="btn btn-default inline-default" title="Download"><i class="icon-downloads"></i></a> <button type="button" class="btn btn-default inline-default" title="Move message to trash folder" data-ng-click="voicemail.delMessage(audio.id, $index)"><i class="icon-trash"></i></button></div><span class="received">{{ audio.received | time }}</span></div></div></div></div><div class="spinner-wrapper animated fade" data-ng-if="!voicemail.messages"><div class="spinner small"></div></div></div></div><div class="sticky"><div class="row bottom-bar"><div class="input-group pull-left"></div></div></div>')
}])}();