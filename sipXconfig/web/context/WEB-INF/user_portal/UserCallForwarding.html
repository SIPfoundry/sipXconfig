<div jwcid="@Border" restricted="false">
  <span jwcid="@If" condition="ognl:userSession.admin">
    <span jwcid="@UserNavigation" bean="prop:user"/>    
  </span>
  <h2 jwcid="@Else" element="h2">
    <span key="title">Call Forwarding</span>
  </h2>
  <div jwcid="@OptionalElement" id="settings-content" element="ognl:(userSession.admin ? 'div' : null)">
    <span jwcid="@QuickHelp" value="message:quick.help"/>
    <span jwcid="@ErrorMsg"/>
    <form jwcid="@Form" delegate="bean:validator" listener="listener:submit">
      <ul class="component-links">      
        <li><a jwcid="addRingLink@LinkSubmit" selected="prop:action" tag="add">
          <span key="add">Add Number</span></a>
        </li>
      </ul>
      <fieldset>
        <table>
          <tbody>
            <tr>
              <td colspan="4">
                <span jwcid="@InsertText" value="prop:firstCallMsg">Your extension will ring first.</span>
              </td>
            </tr>
            <!-- iterate here -->            
            <tr jwcid="@For" source="prop:rings" value="prop:ring" index="prop:index" volatile="true">
              <span jwcid="@RingEditor" ring="prop:ring" index="prop:index" deleteListener="listener:deleteRing" availableSchedules="prop:availableSchedules"/>
            </tr>
            <tr jwcid="@If" condition="prop:hasVoiceMail" element="tr">
              <td colspan="4">
                <span key="msg.voicemail">If no-one answers your call will be forwarded to Voicemail.</span>
              </td>
            </tr>            
          </tbody>
        </table>
      </fieldset>      
      <ul jwcid="@FormActions" callback="prop:callback" listener="listener:commit"/>
    </form>
  </div>
</div>
