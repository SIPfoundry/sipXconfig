<div jwcid="@Border" useDojo="true">
  <h2>
    <span key="title">Auto Attendant</span>
  </h2>
  <span jwcid="@common/TabNavigation" tabNames="ognl:{'menu', 'options'}" selectedTab="prop:tab"/>  
  <div id="settings-content">
    <span jwcid="@ErrorMsg" />
    <form jwcid="form@Form" delegate="bean:validator">
      <span id="attendant:form" />
      <span jwcid="@RenderBlock" block="ognl:components.get(tab + 'Tab')" />
      <ul jwcid="formActions@FormActions" callback="ognl:callback" 
        listener="listener:commit"/>
    </form>
  </div>
  
  <div jwcid="menuTab@Block">
    <div class="help">
      <dl>
      <dt><span key="helpH1">Upload new prompt:</span></dt>
      <dd><span key="helpT1">Uploaded sound files must be 8khz /
      16 bit PCM samples, signed, little-endian, 1 channel (mono), .wav
      header (implied 128kbps) </span></dd>
      </dl>
      <dl>
      <dt><span key="helpH2">Actions</span></dt>
      <dd><span key="helpT2">To allow the attendant user to dial
      someone's extension at any time, do not assign an action to the first
      digit of the digits in the range of internal extensions. For example,
      if your internal extensions all start with 1, leave 1 blank. </span></dd>
      <dt><span key="helpH3">Operator</span></dt>
      <dd><span key="helpT3">Route call to extension 0</span></dd>
      <dt><span key="helpH4">Dial by name prompt</span></dt>
      <dd><span key="helpT4">The user will be prompted to dial a
      person's name using the keypad. </span></dd>
      <dt><span key="helpH5">Repeat Prompt</span></dt>
      <dd><span key="helpT5">Play the initial greeting again</span></dd>
      <dt><span key="helpH6">Voicemail login</span></dt>
      <dd><span key="helpT6">The user will be directed to the
      voicemail system and prompted to log in. </span></dd>
      <dt><span key="helpH7">Disconnect</span></dt>
      <dd><span key="helpT7">Play a good-bye message and end the
      call.</span></dd>
      <dt><span key="helpH8">Auto Attendant</span></dt>
      <dd><span key="helpT8">Go to another auto attendant menu.</span></dd>
      <dt><span key="helpH9">Goto Extension</span></dt>
      <dd><span key="helpT9">Route the call directly to another
      extension listed in the parameter field.</span></dd>
      <dt><span key="helpH10">Deposit Voicemail</span></dt>
      <dd><span key="helpT10">Transfer the call directly to a
      voicemail box listed in the parameter field.</span></dd>
      </dl>
    </div>
    <fieldset>
      <table>
        <tr jwcid="common@ItemCommon" item="ognl:attendant" 
          useEnabled="ognl:false" useFieldset="ognl:false"/>
        <tr jwcid="attendantPromptLabel@FieldPanel"
          label="message:attendant.prompt" 
          field="ognl:components.attendantPromptSelector.prompt">
          <span jwcid="attendantPromptSelector@AssetSelector" 
            asset="ognl:attendant.prompt" assetDir="ognl:vxmlGenerator.promptsDirectory"
            errorMsg="message:error.select" contentType="literal:audio/x-wav"
            selectable="true"/>
        </tr>
      </table>
    </fieldset>
    <fieldset>
      <table jwcid="menuItemTableView@contrib:TableView" id="attendant:menuItems"
      class="component" source="ognl:menuItems.dialPadKeys" 
      columns="literal:* !dialpad,!action:,!parameter:" pageSize="literal:-1">
        <thead>
          <tr>
            <th width="5" />
            <th jwcid="menuItemColumns@contrib:TableColumns" />
          </tr>
        </thead>
        <tbody>
          <tr jwcid="menuItemRows@contrib:TableRows" row="ognl:menuItems.currentDialPadKey"
            class="ognl:beans.rowClass.next">
            <td>
              <span jwcid="selectedRow@Checkbox" 
                value="ognl:selections.selected[menuItems.currentDialPadKey.name]"/>
            </td>
            <span jwcid="dialpadColumnValue@Block"> 
              <span jwcid="menuItemKey@PropertySelection" model="bean:dialPadSelectionModel"
                value="ognl:menuItems.currentMenuItemDialPadKeyAssignment"/> 
            </span>
            <span jwcid="actionColumnValue@Block">
                  <select jwcid="menuItemAction@Insert" 
                    value="ognl:getActionName(menuItems.currentMenuItem.action)"/>
                </span>
                <span jwcid="parameterColumnValue@Block">
                  <span jwcid="ifExtensionParameter@If" 
                    condition="ognl:menuItems.currentMenuItem.action.extensionParameter">
                    <input jwcid="extensionParameter@TextField" type="text" 
                      value="ognl:menuItems.currentMenuItem.parameter"/>
                  </span>
                  <span jwcid="ifAttendantParameter@If"
                    condition="ognl:menuItems.currentMenuItem.action.attendantParameter"> 
                    <selec jwcid="attendantParameter@PropertySelection" 
                      model="ognl:tapestry.instructUserToSelect(beans.autoAttendants, messages)"
                      value="ognl:menuItems.currentMenuItem.parameter"/>
                  </span>
                </span>
            <td jwcid="menuItemValues@contrib:TableValues" />
          </tr>
          <tr jwcid="addMenuItemRow@Any" class="ognl:beans.rowClass.next">
            <td />
            <td>
              <span jwcid="addMenuItemKey@PropertySelection" 
                model="bean:dialPadSelectionModel"
                value="ognl:addMenuItemDialPad"/>
            </td>
            <td>
              <span jwcid="addMenuItemAction@PropertySelection"
                model="ognl:tapestry.instructUserToSelect(beans.localizedMenuItemActions, messages)"
                value="ognl:addMenuItemAction" />
            </td>
            <td>
              <input jwcid="addMenuItem@Submit" id="attendant:addMenuItem"
                value="message:button.add" listener="listener:addMenuItem"/>
            </td>
          </tr>
        </tbody>
      </table>
    </fieldset>
    <ul class="component-submit">
      <li>
        <input jwcid="reset@Submit" id="attendant:reset"
        value="message:button.resetToDefaults" listener="listener:reset"/>
      </li>
      <li>
        <input jwcid="removeMenuItems@Submit" id="attendant:removeMenuItems"
        value="message:button.remove" listener="listener:removeMenuItems"/>
      </li>
    </ul>  
  </div>
  <div jwcid="optionsTab@Block">
    <fieldset jwcid="settingsFieldset@setting/SettingsFieldset" 
      settings="ognl:attendant.settings" renderGroupTitle="true"/>  
  </div>  
</div>
